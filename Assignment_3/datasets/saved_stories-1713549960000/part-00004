{"aid": "40085742", "title": "SSO Got an Upgrade: OpenID Connect and SCIM for Cross-Domain Identity Management", "url": "https://wundergraph.com/blog/sso-openid-connect-system-for-cross-domain-identity-management", "domain": "wundergraph.com", "votes": 1, "user": "jensneuse", "posted_at": "2024-04-19 12:04:32", "comments": 0, "source_title": "SSO got an upgrade: OpenID Connect & SCIM for Cross-Domain Identity Management", "source_text": "SSO got an upgrade: OpenID Connect & SCIM for Cross-Domain Identity Management\n- WunderGraph\n\nLatest Blog: SSO got an upgrade: OpenID Connect & SCIM for Cross-Domain\nIdentity Management\n\nWunderGraph\n\nDiscordTalk to an ExpertLogin\n\nBlog\n\n/\n\nEducation\n\n# SSO got an upgrade: OpenID Connect & SCIM for Cross-Domain Identity\nManagement\n\nJens Neuse\n\n2024-04-18\u00b75min read\n\nSingle Sign-On (SSO) is an important feature for modern SaaS applications and\nEnterprise software. It allows users to sign in once and access multiple\napplications without having to sign in again, but it also allows a company to\nmanage user access across many applications from different vendors in a\ncentralized way.\n\nIn most cases, SSO is implemented using the OpenID Connect (OIDC) protocol.\nOpenID Connect is an identity layer on top of OAuth 2.0, which allows clients\nto verify the identity of the end-user based on the authentication performed\nby an authorization server, as well as to obtain basic profile information\nabout the end-user in an interoperable and REST-like manner.\n\nToday, we'd like to introduce you to SCIM, the System for Cross-domain\nIdentity Management. SCIM is a standard for automating the exchange of user\nidentity information between identity domains, or IT systems. SCIM goes hand\nin hand with OpenID Connect and can greatly improve the user experience and\nsecurity of your SSO implementation.\n\nCosmo: Full Lifecycle GraphQL API Management\n\nAre you looking for an Open Source Graph Manager? Cosmo is the most complete\nsolution including Schema Registry, Router, Studio, Metrics, Analytics,\nDistributed Tracing, Breaking Change detection and more.\n\nLearn more\n\n##\n\nWhat is OpenID Connect?\n\nOpenID Connect is an identity layer on top of the OAuth 2.0 protocol. It\nallows an application (OIDC client) to verify the identity of the end-user\nbased on the authentication performed by an identity provider (OIDC server).\nOnce the user is authenticated, the client can obtain name value pairs of user\ninformation (OIDC claims) from the identity provider in a standardized way.\n\nOpenID Connect is designed to be easy to use and implement, and it is widely\nsupported by many identity providers and client libraries. It is also\nextensible, which means that you can add custom claims and scopes to the\nstandard OIDC flow.\n\nThat said, OpenID Connect by itself is not a complete solution to manage user\nidentities across multiple applications. It is focused on the authentication\npart of the SSO process, but it does not provide a standardized way to manage\nuser identities and their attributes across different applications.\n\nHere are some examples of what OpenID Connect is lacking:\n\n  * if a user changes their email address in one application, this change is not automatically propagated to other applications\n  * if a user is deactivated in one application, this change is not automatically propagated to other applications\n  * if a user is added to a group in one application, this change is not automatically propagated to other applications\n\nIn a nutshell, OpenID Connect is not actively synchronizing user identities,\ntheir attributes, and their permissions across different applications, it's\nreally just about authenticating users.\n\nWhen you deactivate a user, e.g. because they left the company or their\naccount was compromised, you want to make sure that their session is\nterminated in all applications they had access to.\n\nThis is where SCIM comes into play.\n\n##\n\nWhat is SCIM - System for Cross-domain Identity Management - and how does it\nwork?\n\nLet's take a look at how we're using SCIM at WunderGraph to illustrate how it\nworks. We're providing an API Management solution for GraphQL APIs, which\ncomes with a dashboard where users can manage their APIs. Users need to sign\nin to access the dashboard, so we're using OpenID Connect to delegate the\nauthentication to an identity provider like Okta, Auth0, AWS Cognito or\nKeycloak.\n\nThis works great but has some limitations. For example, it's common that\ndifferent teams within a company own different Subgraphs (GraphQL\nMicroservices). Only a user on the same team should have the permission to\nmanage the Subgraph, e.g. updating the GraphQL Schema, which is equivalent to\nupdating the contract of the API.\n\nWhen a user joins a team, or gets access to a new Resource, we'd like to\nautomatically grant them the necessary permissions. On the other hand,\nemployees might also change teams or leave the company, in which case we'd\nlike to automatically revoke their permissions.\n\nIf we're simply using OpenID Connect, we'd have three options to manage\npermissions:\n\n  1. manage permissions manually in the dashboard\n  2. revoke their session so that they have to sign in again to get the updated permissions\n  3. implement a custom solution to synchronize permissions across applications\n\nOption 1 is not scalable and error-prone. Option 2 is not user-friendly and\ncan lead to security issues. What if the sign-out doesn't work properly? What\nif a user login gets compromised and we're not able to force a sign-out?\nOption 3 sounds like a possible solution, but we'd have to implement such a\n\"bridge\" for every identity provider we support.\n\nThis is where SCIM comes into play. SCIM standardizes the solution to Option\n3. Here's how it looks like in our example.\n\nCosmo SCIM\n\nThere are three main events that trigger a SCIM operation:\n\n  1. User is added to the SCIM application (provisioning)\n  2. User is updated in the SCIM application (update)\n  3. User is removed from the SCIM application (deprovisioning)\n\nFor each of these events, the Identity Provider sends a request to the SCIM\napplication, which needs to implement the SCIM API protocol to handle these\nrequests.\n\nTo handle these requests, the SCIM application needs to implement the\nfollowing endpoints:\n\n  * POST /Users/<user-id>\n  * PUT /Users/<user-id>\n\nWhen these endpoints are called, we're updating the user's permissions in our\nsystem, e.g. by allowing them to manage a Subgraph or revoking their\npermissions.\n\n##\n\nWhy is SCIM important for SSO in the context of SaaS applications and\nEnterprise software?\n\nAccording to the BetterCloud State of SaaS Ops 2023 Report , the average\ncompany uses 130 SaaS applications on average.\n\nThis means that a company has to manage user identities across all these\napplications, which can be a daunting task if done manually. SSO is no longer\na nice-to-have feature or something that only large enterprises need, it's\nessentially becoming the baseline for modern SaaS applications and the default\nfor Enterprise software.\n\nSCIM plays a crucial role in this context, as it facilitates the\nsynchronization of user identities, their attributes, and their permissions\nacross all these applications. It allows companies to automate the onboarding\nand offboarding of employees, as well as the management of user permissions\nacross different applications.\n\nIn summary, if you're building a SaaS application that targets companies or\nenterprises, you should consider implementing SCIM in addition to OpenID\nConnect to provide a seamless and secure SSO experience for your users.\n\n##\n\nConclusion\n\nWe've introduced you to SCIM, the System for Cross-domain Identity Management,\nand explained how it works alongside OpenID Connect. We've discussed the\ndifferent responsibilities of OpenID Connect and SCIM, and how both protocols\ncan be used together to provide a seamless and secure SSO experience for your\nusers.\n\nWe've also shown you a practical example of how we're using SCIM at\nWunderGraph, and shared some insights on how to implement SCIM in your own\napplication.\n\nI think it's time to level up your SSO game. With the ever-increasing number\nof SaaS applications and the complexity of managing user identities across\ndifferent applications, SCIM is becoming an essential part of any SSO\nimplementation.\n\nNext\n\n    Distributed GraphQL Subscriptions with NATS and Event Driven Architecture \u2192\n\nWunderGraph - Rethinking API Integrations\n\nProduct\n\n  * Cosmo Router\n  * Documentation\n  * Features\n  * Pricing\n  * Architecture\n  * Enterprise\n\nResources\n\n  * GitHub\n  * Platform Status\n  * Apollo GraphOS Alternative\n\nCompany\n\n  * Why WunderGraph\n  * Professional Services\n  * Support\n  * Blog\n  * Customers\n  * Jobs\n\n3\n\nRelated Projects\n\n  * Open Federation\n  * BFF Patterns\n  * GraphQL API Gateway\n  * Open Previews\n\nSOC 2 Certified\n\n\u00a9 2024 WunderGraph, Inc. All rights reserved.\n\nPrivacy PolicyTerms of Use\n\nRSSAtomJSON\n\n", "frontpage": false}
