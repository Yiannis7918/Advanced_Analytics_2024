{"aid": "40077287", "title": "A Telegram Bot Dockerized to convert speech to text from video and audio files", "url": "https://github.com/tonym128/shhh-bot", "domain": "github.com/tonym128", "votes": 2, "user": "tonym128", "posted_at": "2024-04-18 15:32:46", "comments": 0, "source_title": "GitHub - tonym128/shhh-bot: A Telegram Bot to convert speech to text from small videos and audio files.", "source_text": "GitHub - tonym128/shhh-bot: A Telegram Bot to convert speech to text from\nsmall videos and audio files.\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\ntonym128 / shhh-bot Public\n\n  * Notifications\n  * Fork 2\n  * Star 13\n\nA Telegram Bot to convert speech to text from small videos and audio files.\n\n13 stars 2 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# tonym128/shhh-bot\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n26 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\ntonym128change command to .runApr 15, 20248951378 \u00b7 Apr 15, 2024Apr 15, 2024\n\n## History\n\n94 Commits  \n  \n### .github\n\n|\n\n### .github\n\n| Create dependabot.yml| Apr 12, 2024  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| Updated .gitignore| Apr 10, 2024  \n  \n### Dockerfile\n\n|\n\n### Dockerfile\n\n| Fixed checkUser| Apr 11, 2024  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README.md| Apr 12, 2024  \n  \n### convert.sh\n\n|\n\n### convert.sh\n\n| fixed filename to /tmp/media| Apr 15, 2024  \n  \n### download.sh\n\n|\n\n### download.sh\n\n| Remove symlink then recreate| Apr 11, 2024  \n  \n### requirements.txt\n\n|\n\n### requirements.txt\n\n| Bump idna from 3.6 to 3.7| Apr 12, 2024  \n  \n### shhh.py\n\n|\n\n### shhh.py\n\n| change command to .run| Apr 15, 2024  \n  \n### test_shhh.py\n\n|\n\n### test_shhh.py\n\n| Refactored ShhBot to class and added unit tests| Apr 10, 2024  \n  \n## Repository files navigation\n\n# Shhh Bot\n\nA Telegram Bot to convert speech to text from small videos and audio files.\n\nThis bot uses Docker, Telegram, Python and Whisper.cpp to stand up a small\ntelegram bot on your own infrastructure which can take media and convert it to\ntext.\n\nThe setup is meant to be as simple and quick as possible, so it's not meant\nfor production use. It is intended for personal use only.\n\nTested on AMD64, provided build scripts for ARM64 and ARM32v7.\n\nThere's a YouTube video of a full build, source and setup run through -\nhttps://youtu.be/Vo4OVdDRlcU\n\nThis was originally a Raspberry Pi 4 project I wrote and was manually running\non a Pi. You can see a video about that here -\nhttps://www.youtube.com/watch?v=MjLzgebcDHo\n\nAnd now it's a Docker container, which can run on a Pi, Mac and Windows PC!\n\n# Setup\n\n## Create a Telegram Bot\n\n  * Create a new bot on Telegram and get the API key and chat ID for your bot.\n\n    * Start a chat with @BotFather\n    * Send /newbot to BotFather and follow the instructions to create a new bot\n    * Copy the API key and chat ID for your bot\n    * Get your chat ID by going to saved messages in Telegram and copying the number https://web.telegram.org/a/#12345678 in this example your chat id would be 12345678\n\n## Change the model\n\nSee the Docker Compose Environment SHHH_WHISPER_MODEL to have your desired\nmodel downloaded to /models at startup, which can be persisted across Shhh-bot\nversions.\n\nThe Dockerfile in the repository is currently configured to use the base\nmodel, but you can change it to any other supported model.\n\nIn the Dockerfile, you only need to change this line\n\n    \n    \n    ARG model=\"base\"\n\n\"base\" can be changed to any of the valid values accepted by\nwhisper.cpp/models/download-ggml-model.sh\n\n  * Whisper models\n\n    * tiny, tiny.en,tiny-q5_1, tiny.en-q5_1\n    * base, base.en, base-q5_1, base.en-q5_1\n    * small, small.en, small.en-tdrz, small-q5_1, small.en-q5_1\n    * medium, medium.en, medium-q5_0, medium.en-q5_0\n    * large-v1\n    * large-v2, large-v2-q5_0\n    * large-v3, large-v3-q5_0\n\n## Docker Compose\n\n    \n    \n    version: '3' services: shhhbot: container_name: shhhbot hostname: shhhbot restart: unless-stopped image: ghcr.io/tonym128/shhh-bot environment: - SHHH_API_KEY={BOT_TOKEN} # Optional # - SHHH_MY_CHAT_ID={YOUR_CHAT_ID} # - SHHH_ALLOWED_CHAT_IDS={YOUR_CHAT_ID ANOTHER_CHAT_ID ANOTHER_CHAT_ID} # - SHHH_WHISPER_MODEL=medium # - SHHH_WHISPER_OPTIONS=-l nl volumes: - models:/models volumes: models:\n\n### Environment Options\n\n#### SHHH_API_KEY={BOT_TOKEN}\n\nThis is the only required Environment variable and it is the Bot Token your\nBot will operate under. See Setup - Create a Telegram Bot at the top for how\nto provision this.\n\n#### SHHH_MY_CHAT_ID={YOUR_CHAT_ID}\n\nSupply a chat_id here to receive all admin messages, messages will go to\ndocker logs, but this would provide more instant access to processing\nhappening on your bot.\n\n#### SHHH_ALLOWED_CHAT_IDS={YOUR_CHAT_ID ANOTHER_CHAT_ID ANOTHER_CHAT_ID}\n\nIf you wish for only certain people to use the bot, you can specify their\nchat_id's here, you can also add groups, which are negative numbers, if you\nwish for a group to be able to use the bot.\n\n#### SHHH_WHISPER_MODEL=medium\n\nYou can specify any model Whisper supports and it will be downloaded for you\non startup and stored in /models, which you can mount for persistence.\n\n#### SHHH_WHISPER_OPTIONS=-l nl\n\nYou can provide any additional Whisper command line options you want. For\ninstance, -l specifies the language you're speaking in, by default it is set\nto en for English and will output response in English, potentially even\ntranslating whatever speech it detects into English. nl specifies dutch in\nthis case and the text will be output in Dutch.\n\n### Volume mount\n\nThe volume mount provides a place to store the models seperately from the\ncontainer.\n\nA few prebuilt images with a model supplied\n\n  * ghcr.io/tonym128/shhh-bot\n  * ghcr.io/tonym128/shhh-bot-base\n  * ghcr.io/tonym128/shhh-bot-small\n\nShhh-bot includes the tiny model, base and small include those models When a\nmodel is selected via the SHHH_WHISPER_MODEL it can be any of the default\nmodels supported by Whispers built in download functionality. The model is\nstored in /model and you can avoid having to download it multiple times using\nthe persistence of a docker volume. Try out other models and switch back and\nforth between them, as long as you have the volume, you won't have to download\nit again.\n\n## Build and run Docker image\n\n    \n    \n    git clone https://github.com/tonym128/shhh-bot.git cd shhh-bot docker build -t shhh-bot:1.0 . docker run --env SHHH_API_KEY={BOT_TOKEN} --env SHHH_MY_CHAT_ID={YOUR_CHAT_ID} --name shhhbot -i shhh-bot:1.0\n\nValues should look something like this:\n\n  * SHHH_API_KEY=1234567890:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n\nThe following two are optional: Admin chat id for receiving messages: -\nSHHH_MY_CHAT_ID=12345678 Space seperated list of chat id's that are allowed to\ntalk to your service: - SHHH_ALLOWED_CHAT_IDS={YOUR_CHAT_ID ANOTHER_CHAT_ID\nANOTHER_CHAT_ID}\n\n### Export built image to tar and upload directly to your server\n\n  * docker save shhhbot:1.0 > shhhbot.tar\n  * Import image in Portainer by going to images and importing a new image from a tar file and upload with a name and tag eg shhhbot:1.0\n\n## Build and push to DockerHub\n\n    \n    \n    git clone https://github.com/tonym128/shhh-bot.git cd shhh-bot docker buildx create --name builder docker buildx use builder docker buildx inspect --bootstrap docker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t {YOUR_USERNAME}/shhhbot:1.0 --push .\n\n## About\n\nA Telegram Bot to convert speech to text from small videos and audio files.\n\n### Resources\n\nReadme\n\nActivity\n\n### Stars\n\n13 stars\n\n### Watchers\n\n1 watching\n\n### Forks\n\n2 forks\n\nReport repository\n\n## Releases 25\n\nv1.0.24 Latest\n\nApr 15, 2024\n\n\\+ 24 releases\n\n## Packages 5\n\n  * shhh-bot\n  * shhh-bot-small\n  * shhh-bot-tiny\n\n\\+ 2 packages\n\n## Contributors 2\n\n  * tonym128 Tony Mamacos\n  * dependabot[bot]\n\n## Languages\n\n  * Python 82.2%\n  * Dockerfile 12.0%\n  * Shell 5.8%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
