{"aid": "40022562", "title": "Show HN: Altnrslog \u2013 New Relic Logs in Context with Log/Slog (Golang OSS)", "url": "https://github.com/miyamo2/altnrslog", "domain": "github.com/miyamo2", "votes": 1, "user": "miyamo2", "posted_at": "2024-04-13 12:00:33", "comments": 0, "source_title": "GitHub - miyamo2/altnrslog: alternative library for \"New Relic Logs in Context\" with log/slog.", "source_text": "GitHub - miyamo2/altnrslog: alternative library for \"New Relic Logs in\nContext\" with log/slog.\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nmiyamo2 / altnrslog Public\n\n  * Notifications\n  * Fork 0\n  * Star 1\n\nalternative library for \"New Relic Logs in Context\" with log/slog.\n\n### License\n\nMIT license\n\n1 star 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# miyamo2/altnrslog\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n3 Branches\n\n10 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\ndependabot[bot]Bump github.com/newrelic/go-agent/v3 from 3.31.0 to 3.32.0\n(#39)7609894 \u00b7\n\n## History\n\n21 Commits  \n  \n### .github\n\n|\n\n### .github\n\n| Chore: #36 Enable Dependabot version update (#37)  \n  \n### internal/mock\n\n|\n\n### internal/mock\n\n| Fix: #24 move mock modules under internal (#25)  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| Feature: #2 Add Transactional Handler (#5)  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Initial commit  \n  \n### README.md\n\n|\n\n### README.md\n\n| Doc: #32 Exclude application scope handler from roadmap to v1 (#33)  \n  \n### context.go\n\n|\n\n### context.go\n\n| Feature: #14 Mod godoc hyperlink (#15)  \n  \n### context_test.go\n\n|\n\n### context_test.go\n\n| Feature: #2 Add Transactional Handler (#5)  \n  \n### doc.go\n\n|\n\n### doc.go\n\n| Doc: #16 Additions to the library description (#18)  \n  \n### exapmles_test.go\n\n|\n\n### exapmles_test.go\n\n| Feature: #22 Add Examples (#23)  \n  \n### go.mod\n\n|\n\n### go.mod\n\n| Bump github.com/newrelic/go-agent/v3 from 3.31.0 to 3.32.0 (#39)  \n  \n### go.sum\n\n|\n\n### go.sum\n\n| Bump github.com/newrelic/go-agent/v3 from 3.31.0 to 3.32.0 (#39)  \n  \n### transactional_handler.go\n\n|\n\n### transactional_handler.go\n\n| Feature: #26 Add log level settings (#27)  \n  \n### transactional_handler_test.go\n\n|\n\n### transactional_handler_test.go\n\n| Feature: #26 Add log level settings (#27)  \n  \n## Repository files navigation\n\n# altnrslog\n\naltnrslog is an alternative library for New Relic Logs in Context with\nlog/slog.\n\naltnrslog can also forward slog.Attr even only APM Agent.\n\n## Roadmap to release stable version\n\n  * Transaction Scope\n\n    * Supports Logs in Context with APM Agent\n    * Supports Logs in Context without APM Agent\n  * Application Scope CANCELED #32\n\n    * Supports Logs in Context with APM Agent\n    * Supports Logs in Context without APM Agent\n\n## Getting started\n\n### Installation\n\n    \n    \n    go get github.com/miyamo2/altnrslog\n\n### Simple Usage\n\n    \n    \n    package main import ( \"encoding/json\" \"fmt\" \"github.com/miyamo2/altnrslog\" \"github.com/newrelic/go-agent/v3/newrelic\" \"log\" \"log/slog\" \"net/http\" \"os\" ) type IntroduceRequest struct { Name string `json:\"name\"` } func main() { nr, err := newrelic.NewApplication( newrelic.ConfigAppName(os.Getenv(\"NEW_RELIC_CONFIG_APP_NAME\")), newrelic.ConfigLicense(os.Getenv(\"NEW_RELIC_CONFIG_LICENSE\")), newrelic.ConfigAppLogForwardingEnabled(true), ) if err != nil { panic(err) } http.HandleFunc(newrelic.WrapHandleFunc(nr, \"/introduce\", func(w http.ResponseWriter, r *http.Request) { ctx := r.Context() tx := newrelic.FromContext(ctx) logHandler := altnrslog.NewTransactionalHandler(nr, tx) logger := slog.New(logHandler) var req IntroduceRequest if err := json.NewDecoder(r.Body).Decode(&req); err != nil { http.Error(w, err.Error(), http.StatusBadRequest) return } logger.InfoContext(ctx, \"START\", slog.Group(\"request\", slog.String(\"name\", req.Name))) response := fmt.Sprintf(\"Hello, %s!\", req.Name) defer logger.InfoContext(ctx, \"END\", slog.String(\"response\", response)) w.Write([]byte(response)) })) log.Fatal(http.ListenAndServe(\":8080\", nil)) }\n\n## Contributing\n\nFeel free to open PR or an Issue.\n\n## About\n\nalternative library for \"New Relic Logs in Context\" with log/slog.\n\n### Topics\n\ngo golang newrelic slog\n\n### Resources\n\nReadme\n\n### License\n\nMIT license\n\nActivity\n\n### Stars\n\n1 star\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases 10\n\nv0.4.2 Latest\n\nApr 8, 2024\n\n\\+ 9 releases\n\n## Packages 0\n\nNo packages published\n\n## Contributors 2\n\n  * miyamo2 miyamo2\n  * dependabot[bot]\n\n## Languages\n\n  * Go 100.0%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
