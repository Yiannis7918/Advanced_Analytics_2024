{"aid": "40087592", "title": "Show HN: Pok'em \u2013 Send Matrix messages with HTTP requests", "url": "https://github.com/arcuru/pokem", "domain": "github.com/arcuru", "votes": 1, "user": "Arcuru", "posted_at": "2024-04-19 14:53:04", "comments": 0, "source_title": "GitHub - arcuru/pokem: A (partial) ntfy clone using Matrix", "source_text": "GitHub - arcuru/pokem: A (partial) ntfy clone using Matrix\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\narcuru / pokem Public\n\n  * Notifications\n  * Fork 0\n  * Star 1\n\nA (partial) ntfy clone using Matrix\n\n### License\n\nMIT license\n\n1 star 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# arcuru/pokem\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n2 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\narcurudocs: fix formatting of the settingsApr 19, 202466b823a \u00b7 Apr 19,\n2024Apr 19, 2024\n\n## History\n\n11 Commits  \n  \n### .github/workflows\n\n|\n\n### .github/workflows\n\n| Init| Apr 18, 2024  \n  \n### nix\n\n|\n\n### nix\n\n| Init| Apr 18, 2024  \n  \n### src\n\n|\n\n### src\n\n| fix: fixing missing config file| Apr 19, 2024  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| Init| Apr 18, 2024  \n  \n### CHANGELOG.md\n\n|\n\n### CHANGELOG.md\n\n| chore: release v0.1.1| Apr 19, 2024  \n  \n### Cargo.lock\n\n|\n\n### Cargo.lock\n\n| chore: release v0.1.1| Apr 19, 2024  \n  \n### Cargo.toml\n\n|\n\n### Cargo.toml\n\n| chore: release v0.1.1| Apr 19, 2024  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Init| Apr 18, 2024  \n  \n### README.md\n\n|\n\n### README.md\n\n| docs: fix formatting of the settings| Apr 19, 2024  \n  \n### Taskfile.yml\n\n|\n\n### Taskfile.yml\n\n| Init| Apr 18, 2024  \n  \n### cliff.toml\n\n|\n\n### cliff.toml\n\n| Init| Apr 18, 2024  \n  \n### flake.lock\n\n|\n\n### flake.lock\n\n| Init| Apr 18, 2024  \n  \n### flake.nix\n\n|\n\n### flake.nix\n\n| feat: add daemon functionality| Apr 18, 2024  \n  \n## Repository files navigation\n\n# Pok'em\n\nThis is a (partial) ntfy.sh clone using Matrix.\n\nThis runs a Matrix bot account that pings you on Matrix when it's called. It\ncan be run standalone, or it can run as a daemon and listen for HTTP requests.\n\nThat's it.\n\nIf you want to use my default instance at https://pokem.jackson.dev, you don't\nneed to install anything.\n\nStatus: Alpha\n\nIt is built using headjack, a Matrix bot framework in Rust.\n\n## Usage\n\nI run an endpoint and associated bot account at https://pokem.jackson.dev.\npokem will default to that instance if you have not configured the server\nsettings.\n\nYou can run your own instance (using pokem --daemon), but here I'll describe\nusing pokem.jackson.dev\n\n  1. On Matrix, create a room and invite the bot account, @pokem:jackson.dev.\n  2. Grab the Matrix Room ID from the welcome message or from your client.\n  3. Run curl --fail -d \"Backup successful \ud83d\ude00\" pokem.jackson.dev/<room id>. Or use pokem <room id> <message>.\n  4. The curl or pokem commands will block until the message is sent, and will return an error if there is a problem.\n\npokem, like ntfy, listens to HTTP PUT/POST requests, so it's easy to send a\nmessage. If you'd like more examples, just look at the ntfy docs and use the\nMatrix Room ID instead of the ntfy \"topic\".\n\nIf you use the pokem CLI, you can set a default_room in the config file, and\nthen you don't need to specify it in commands. pokem Backup Successful \ud83d\ude00 will\nbe all you need.\n\n### Limitations\n\n  1. The pokem.jackson.dev instance is configured to never send messages to rooms larger than 5 people to avoid spam.\n  2. You should not rely on it to have more than 1 9 of reliability.\n  3. There may be usage limits in the future.\n\n## Running A Private Bot Account\n\nIf you don't want to use @pokem:jackson.dev, there are 2 ways to still use\nPok'em.\n\nYou can either:\n\n  1. Host your own bot using pokem --daemon, and access just as described above.\n  2. Use the Pok'em CLI with the Bot login configured. The app will login to the Matrix bot account and send the ping locally.\n\nRunning Pok'em as a daemon has several advantages, but it is perfectly usable\nto just not bother.\n\n  1. The daemon will be much more responsive, since it takes a while to login and sync up on Matrix.\n  2. It will also be continuously available to respond to Room Invites and help request messages.\n\n## Install\n\npokem is only packaged on crates.io, but it's recommended that you run from\ngit HEAD for now.\n\nFor Nix users, this repo contains a Nix flake. See the setup section for\ndetails on configuring.\n\n## Alternative Ideas\n\nHere are some non-standard things you could do with this:\n\n### Alert Everywhere\n\n  1. Run the bot account on a homeserver with bridges configured.\n  2. Have the bot account login to anywhere else with a bridge (Discord, Slack, IRC, iMessage, etc).\n  3. Use this to ping the Discord/Slack/IRC room using the bridge.\n\n### Script Your Own Messages\n\n  1. Give pokem your login info.\n  2. Send any message to a room of your choice as yourself. e.g. pokem <room> I'm running late\n\n## Comparison with ntfy.sh\n\n### Cons\n\n  1. Way fewer features. pokem only does text pings on Matrix.\n  2. Fewer integrations. pokem is limited to only Matrix and things bridged to Matrix.\n\n### Pros\n\n  1. Secure room topics by default. Nobody else can subscribe to the messages even with the key (although they could send them).\n  2. You don't need a separate app, just use your existing Matrix client.\n\n## Setup\n\nUsing your own bot account will require setup, otherwise there is no setup\nrequired.\n\npokem the CLI tool runs down this list until it finds something to do:\n\n  1. pokem --daemon runs it as a daemon, listening for HTTP messages.\n  2. If there is no server or matrix login configured, it will send the request to the pokem.jackson.dev instance.\n  3. pokem with a server configured will send a PUT request to the server. On a failure, it will fallback to trying with a a Matrix login.\n  4. If there is a Matrix login configured, the CLI will attempt to login to Matrix itself.\n\nHere is the config file skeleton. It can be placed in\n$XDG_CONFIG_HOME/pokem/config.yaml or passed via pokem --config\n~/path/to/config.yaml.\n\n    \n    \n    # Optional, for setting a default room # When sending messages as a client, it will send to this room if none is given default_room: \"!RoomID:jackson.dev\" # Optional, will use pokem.jackson.dev by default server: url: https://pokem.jackson.dev # Optional, customize the port if necessary port: 80 # Optional, if you want to login to your own Matrix account # You will need to create the bot account manually matrix: homeserver_url: https://matrix.jackson.dev username: \"pokem\" # Optional, will ask on first run #password: \"\" # Optional, but necessary for use #allow_list: \".*\" # Optional, the max size of the room to message #room_size_limit: 5 # Optional, customize the state directory for the Matrix login data # Defaults to $XDG_STATE_HOME/pokem #state_dir: # Optional, to define the bindings when running as a service daemon: addr: \"0.0.0.0\" port: 80\n\n### Nix\n\nDevelopment is being done using a Nix flake. The easiest way to install pokem\nis to use nix flakes.\n\n    \n    \n    \u276f nix run github:arcuru/pokem\n\nThe flake contains an overlay to make it easier to import into your own flake\nconfig. To use, add it to your inputs:\n\n    \n    \n    inputs.pokem.url = \"github:arcuru/pokem\";\n\nAnd then add the overlay inputs.pokem.overlays.default to your pkgs.\n\nThe flake also contains a home-manager module for installing the daemon as a\nservice. Import the module into your home-manager config and you can configure\npokem all from within nix:\n\n    \n    \n    {inputs, ... }: { imports = [ inputs.pokem.homeManagerModules.default ]; services.pokem = { enable = true; settings = { homeserver_url = \"https://matrix.jackson.dev\"; username = \"pokem\"; password = \"hunter2\"; allow_list = \"@me:matrix.org|@myfriend:matrix.org\"; }; }; }\n\n## About\n\nA (partial) ntfy clone using Matrix\n\n### Resources\n\nReadme\n\n### License\n\nMIT license\n\nActivity\n\n### Stars\n\n1 star\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases\n\n2 tags\n\n## Packages 0\n\nNo packages published\n\n## Languages\n\n  * Rust 66.8%\n  * Nix 33.2%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
