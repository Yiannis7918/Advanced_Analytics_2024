{"aid": "40085727", "title": "Discourse hijacks your CTRL+F because not all posts are loaded to the DOM", "url": "https://meta.discourse.org/t/options-to-disable-hijack-of-cmd-f-ctrl-f-and-keys-for-search/16875", "domain": "discourse.org", "votes": 1, "user": "dhruvbhatia", "posted_at": "2024-04-19 12:02:55", "comments": 0, "source_title": "Options to disable hijack of CMD+F / CTRL+F and \"/\" keys for search? - feature - Discourse Meta", "source_text": "Options to disable hijack of CMD+F / CTRL+F and \"/\" keys for search? - feature\n- Discourse Meta\n\nSkip to main content\n\n  * Tech Advocate Assigns\n  * Team Inbox\n\nAnnouncement: the Terms of Service for Meta have changed - Terms of Service -\nDiscourse Meta\n\n#\n\nOptions to disable hijack of CMD+F / CTRL+F and \u201c/\u201d keys for search?\n\nfeature\n\nkeyboard-shortcuts\n\nYou have selected 0 posts.\n\nselect all\n\ncancel selecting\n\nBrendanbrpc\n\nJun 2014\n\nI\u2019m not sure why anyone thought it was a good idea to hijack the universally\naccepted \u201cFind\u201d functionality of the browser to open the search box... it\u2019s\nnothing but frustrating when you\u2019re trying to find text on the page. I noticed\nwhoever implemented also decided they would be clever by also hijacking the\nless common \u201c/\u201d (vi-style) key shortcut for this as well.\n\nPlease at least offer a user-configurable option to disable and an admin-\nconfigurable default setting.\n\n  * Pressing Ctrl+F twice on topic search should close the Discourse search window30\n\n  * #### created\n\nJun 2014\n\n  * #### last reply\n\nJun 2019\n\n  * 45\n\n#### replies\n\n  * 46.5k\n\n#### views\n\n  * 14\n\n#### users\n\n  * 76\n\n#### likes\n\n  * 8\n\n#### links\n\n  * 11\n\n9\n\n9\n\nDave McCluremcwumblyProduct Manager\n\nJun 2014\n\nsee also:\n\nDiscourse taking over Ctrl-F feature\n\n> Ctrl-F is for searching the page, for example specific text in a\n> conversation (huge use case). Discourse seems to think it knows better and\n> wants to search other conversations for the text. Thus leaving one no way to\n> search the actual page you\u2019re on for text. Taking over and changing browser\n> functionality is very bad. This is happening on Chrome.\n\nBrendanbrpc\n\nJun 2014\n\nAh, thanks. Just read it, and although it has been tweaked (as I\u2019m seeing),\nthe behavior is still inconsistent enough that it\u2019s still very annoying. It\u2019s\none thing to conditionally do something on say, a mouse click, but another\nwhen you\u2019re overriding a universally used-and-accepted browser shortcut for a\nbrowser built-in feature.\n\nI\u2019m not sure if I should reply to that thread as well, though, since I\u2019m\nasking for the option to disable it.\n\nDaniel Ritchiewhatrevolution\n\nJun 2014\n\n@brpc, in being answered, your request would loop back onto the content (and\neven subtext) of the other thread. I\u2019ll explain, but first:\n\nAn interesting note. CTRL+F isn\u2019t captured when you have insertion point\ninside a form element (input, textarea, etc). So, you do get browser native\ntext search on the page by pressing CTRL+F twice.\n\nHowever! An option to disable CTRL+F capture then requires that browser native\nCTRL+F functions properly, which comes back to the fact that Discourse can\u2019t\nprovide that in topics of more than ~10 posts because it doesn\u2019t leave the\nentire topic thread in DOM at all times. Bottom line then goes all the way to\na root ideology of Ember.js, which is that an Ember application is not a\ntraditional (flat) web page in the sense that caused the browser native CTRL+F\nto be engineered. That then makes it fully OK to capture and replace the\nfeature with something of like-kind, because the replacement both works as\nexpected (it does full-text search of the topic content) and solves an issue\nwith what it is replacing (you can\u2019t have accomplished the expected thing\nwithout the new thing).\n\nI think it\u2019s easier for everyone, now that the captured search feature is\nimproved since the other topic began, to leave that in place. It works well:\nfar better than explaining to laymen users why browser CTRL+F isn\u2019t working,\nevery time they encounter that and ask.\n\nThe one thing I really lament about it is the fact that the UI response is\nmoved and looks different... but that\u2019s a UX issue that I don\u2019t expect\nDiscourse to solve today.\n\nJeff Atwoodcodinghorrorco-founder\n\nJun 2014\n\nBrowser CTRL+F simply will not work since most of the post and topic stream is\nnot in the browser DOM. So what you are proposing is for users to have broken\nfunctionality.\n\nBrendanbrpc\n\nJun 2014\n\ncodinghorror:\n\n> So what you are proposing is for users to have broken functionality.\n\nThat is absolutely not what I\u2019m proposing. I am not asking you to change, in\nany way, the search function of discourse. That would be ludicrous. Should my\nproposition be considered (which seems unlikely given the responses here,\nwhich is unfortunate), the search would still work perfectly fine via clicking\nthe magnifying glass, which, if I understand correctly, is all that capturing\nCTRL+F is triggering to open.\n\nThat said, it\u2019s confusing to me why this can\u2019t be made an option, at least at\nthe user level (i.e. enable/disable keyboard shortcuts). I personally find\nkeyboard shortcuts on websites annoying, especially when using \u201cSearch for\ntext when I start typing\u201d on Firefox. I disagree with the notion that \u201csearch\nwould be broken\u201d if the keyboard shortcut was disabled.\n\nSam Saffronsamco-founder\n\nJun 2014\n\nCTRL+F in a topic has huge problems.\n\n  1. replaceState which is called during scroll clears the current results\n  2. We only load ten screens so often stuff is off screen.\n\n(1) is a killer problem, unless Suppress updating of URL during topic\nnavigation 125 is deemed a core option I am strongly against allowing users to\nexperience a largely broken search experience.\n\nBrendanbrpc\n\nJun 2014\n\nWhy not just an option to disable keyboard shortcuts with a warning, then? At\nthis point I\u2019m even fine with shortcuts being enabled by default (given the\naforementioned issues).\n\nOr, hell, if we\u2019re gonna go full hog on the keyboard shortcuts, why not\nimplement full VI-style shortcuts?\n\n  * \u201c/\u201d triggers in-topic search always\n  * Highlight results as soon as the search is complete (don\u2019t make me press enter; close search box after search completes)\n  * \u201cn\u201d and \u201cN\u201d scroll to and double highlight (a drop shadow?) next occurrence and previous occurrence respectively.\n\nSam Saffronsamco-founder\n\nJun 2014\n\nWe cant really do that, its not fair to give this option to a user:\n\n: enable built-in browser search unconditionally ( when enabled browser search\nwill not function correctly )\n\nSam Saffronsamco-founder\n\nBrendan\n\nJun 2014\n\nAlso, not against adding a VIM like mode as a power user thing\n\nBrendanbrpc\n\nJun 2014\n\nI\u2019d like to see this if we can\u2019t have the broken browser search functionality\n\nShould I create an issue on github for it?\n\nQwertie\n\nJun 2014\n\nDiscourse doesn\u2019t keep the page text in the DOM?! I have just three words to\nsay about that:\n\n  * W.\n  * T.\n  * F.!!!\n\nSam Saffronsamco-founder\n\nBrendan\n\nJun 2014\n\nWell, for a 1000 post topic how are you going to ensure all the text is in the\nDOM. It means ember cloaking needs to be amended to allow for a lightweight\ncloak otherwise ember views bloat, a rather big bite of work.\n\nAlso replaceState thing is a bug/missing feature on chrome that should be\ntracked there.\n\nLeolack\n\nJul 2014\n\nIt doesn\u2019t really matter if the native browser search is \u201chijacked\u201d or not.\nHere is the problem:\n\nInput: User presses Ctrl-F, types letters, presses Enter/Return.\n\nExpected Result: View jumps to highlighted text, if there is a match.\n\nObserved Result: User is taken to a completely different webpage.\n\nThe \u201cexpected result\u201d is seen in Notepad, Chrome, even Google Drive which also\ncommandeers Ctrl-F (as @codinghorror pointed out elsewhere). Cannot Ctrl-F be\ncaptured without violating the user\u2019s basic mental model?\n\nJeff Atwoodcodinghorrorco-founder\n\nJul 2014\n\nSo the problem is you are pressing enter? In what context does one do an in\npage search (the checkbox must be ticked) and press enter?\n\nSam Saffronsamco-founder\n\nLeo\n\nJul 2014\n\nOn the topic page that is easily solved by having CTRLf automatically select\n\u201csearch within topic\u201d\n\nFor list hijacking, it is not really fixable. @codinghorror I am not really\nconvinced we should be hijacking ctrl-f on the topic list pages.\n\nLeolack\n\nJul 2014\n\nHi Jeff,\n\nI may not be making myself clear. The \u201ccontext\u201d I\u2019m thinking of is almost\nevery other desktop application I use. I can only speak for myself, but\nrepeatedly using common software has trained me to expect UIs to work a\ncertain way (the \u201cuser model\u201d).\n\nTrue, only in some software (e.g., MS Office, Eclipse, Adobe Reader X) is it\nnecessary to press Enter to highlight the first result. In other software\n(Chrome, Firefox, Google Drive) pressing Enter is not necessary to highlight\nthe first result; but it does jump to the next result. This isn\u2019t at issue,\nbut as you\u2019ve quoted Bill Higgins against \u201cviolating users\u2019 unwritten\nexpectations of how a web application should look and behave\u201d 20 I can guess\nat what you might prefer.\n\nThe details of pressing Enter only confuse the point. All I was trying to say\nis that the unfamiliar Ctrl-F behaviour was a frustration after 10 minutes of\nbrowsing the Discourse demo, especially when it had unintended consequences\nlike navigating to a completely different page.\n\nJeff Atwoodcodinghorrorco-founder\n\nSam Saffron\n\nJul 2014\n\nAutomatically search within topic should be default checked when keyboard\nsearch (vs. click or tap) is invoked from a topic page. At least the UI makes\nthis clear now with the checkbox visible.\n\nSam Saffronsamco-founder\n\nJul 2014\n\nI don\u2019t object to that at all, but in the lists, I am not sure hijacking\nCTRL-F is right, in fact I find that I sometimes want to use it for navigation\nso its impacting me.\n\nJeff Atwoodcodinghorrorco-founder\n\nJul 2014\n\nRegardless, within a topic if you invoke ctrl f, the checkbox should be\nchecked.\n\n", "frontpage": false}
