{"aid": "40010050", "title": "Show HN: Running TempleOS in user space without virtualization", "url": "https://github.com/1fishe2fishe/EXODUS", "domain": "github.com/1fishe2fishe", "votes": 5, "user": "1fishe2fishe", "posted_at": "2024-04-12 06:57:50", "comments": 0, "source_title": "GitHub - 1fishe2fishe/EXODUS: Run TempleOS in user space", "source_text": "GitHub - 1fishe2fishe/EXODUS: Run TempleOS in user space\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\n1fishe2fishe / EXODUS Public\n\n  * Notifications\n  * Fork 3\n  * Star 16\n\nRun TempleOS in user space\n\n### License\n\nZlib license\n\n16 stars 3 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# 1fishe2fishe/EXODUS\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n0 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\n1fishe2fishemove thunk declarations to separate headerce30b1e \u00b7\n\n## History\n\n91 Commits  \n  \n### T\n\n|\n\n### T\n\n| fix race condition in Server  \n  \n### cmake\n\n|\n\n### cmake\n\n| Initial commit  \n  \n### img\n\n|\n\n### img\n\n| readme got a palette update  \n  \n### src\n\n|\n\n### src\n\n| move thunk declarations to separate header  \n  \n### vendor\n\n|\n\n### vendor\n\n| refactor out redundant routine  \n  \n### .clang-format\n\n|\n\n### .clang-format\n\n| FreeBSD header fix, et al  \n  \n### .gitattributes\n\n|\n\n### .gitattributes\n\n| Initial commit  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| fix NtQueryDirectoryFile usage by linking NTDLL instead of ntoskrnl  \n  \n### BuildHCRT.HC\n\n|\n\n### BuildHCRT.HC\n\n| Initial commit  \n  \n### CMakeLists.txt\n\n|\n\n### CMakeLists.txt\n\n| Fs/Gs are less hacky now  \n  \n### CONTRIBUTING.md\n\n|\n\n### CONTRIBUTING.md\n\n| Builds on Windows again, got rid of sound hack  \n  \n### HCRT_BOOTSTRAP.BIN\n\n|\n\n### HCRT_BOOTSTRAP.BIN\n\n| fix race condition in Server  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| renovate  \n  \n### README.MD\n\n|\n\n### README.MD\n\n| fix compiler bug for bit operations on reg vals  \n  \n## Repository files navigation\n\n# EXODUS: Executable Divine Operating System in Userspace\n\nEXODUS is a port of the TempleOS kernel to user space for Linux, Windows and\nFreeBSD. EXODUS makes HolyC a user-space general programming language that\nisn't just an exclusivity of virtual machines. It contains a mostly full-\nfeatured GUI from stock TempleOS, and a CLI mode which has found uses for\nrunning the networked servers automatically and building EXODUS' kernel\nitself.\n\n# Building EXODUS\n\n## Linux/FreeBSD\n\nInstall the packages for CMake and the development headers for SDL2. Navigate\nto the directory and run these commands:\n\n    \n    \n    mkdir build cd build cmake .. make -j$(nproc); cd ..\n\nYou'll see the exodus binary. NOTE: WARNs during the build process aren't a\nsign of failure.\n\n## Windows\n\nWindows users tend to be less technically sophisticated, so here is a more\ndetailed instruction:\n\n  1. Install msys2\n  2. Run \"MSYS2 MINGW64\" (NOTE: MUST BE MINGW64, NO SUPPORT FOR OTHER ENVIRONMENTS)\n  3. Run pacman -Sy mingw-w64-x86_64-{gcc,SDL2,cmake}\n  4. Run the following after navigating to the directory(Ignore any WARNs):\n\n    \n    \n    mkdir build cd build cmake .. ninja cd ..\n\n  5. You will see the exodus binary in the directory\n\n# Running EXODUS\n\nExecute the following to run EXODUS:\n\n    \n    \n    ./exodus -t T\n\nConsult ./exodus -h for more command-line options such as CLI mode.\n\n# Features\n\n  * Host filesystem integration (T:/ is the root drive, and Z:/ is where EXODUS was launched)\n  * Documentation in T:/Server (run #include \"run\"; after Cd(\"Server\");, on localhost:8080)\n  * Mostly orthodox TempleOS GUI\n  * CLI mode\n  * Community software in T:/Community, such as Satania-buddy and games like BlazeItFgt2\n  * Networking (Take a look at T:/Community/{gihon,HolyIRC} and T:/Server's code)\n\nThere have been some disputes on whether TempleOS can have networking or not.\nTo borrow the man's words, God did not ban networking. Terry didn't implement\nnetworking in stock TempleOS because of the line number restriction.\n\n\"God did not ban networking\" (archived)\n\nTerry has also documented that the ideal TempleOS PC needs networking through\na simple serial interface.\n\n# Changes from stock TempleOS\n\n  * The Windows key functionality has been replaced with the Alt key\n  * Context switching is slower than a VM or native hardware because it runs in Ring 3, but it does not degrade general performance\n  * Ring-0 opcodes (HLT, etc) and routines (InU8, etc) are not available (you can assemble the opcodes but they'll raise a fault)\n  * Fs and Gs are pointers to CTask/CCPU instead of the whole structures at gs:0x28 and gs:0x50 respectively (blame microsoft)\n\nA bit of trivia on Fs and Gs, gs:0 is not touched by 64 bit Windows but it's\nwritten to (not sure about read) on Wine, which doesn't guarantee consistency\nof gs:0. TEBs are allocated 0x2000 apart and sizeof(TEB) is 0x1838 so I could\nprobably use 0x1900 or something but that seemed too hacky. Eventually I had\nto resort storing Fs at gs:0x28 and Gs at gs:0x50\n(NtCurrentTeb()->ActiveRpcHandle (it isn't used anywhere)).\n\n# Contributing\n\nRefer to this document.\n\n# Very quick HolyC reference\n\n    \n    \n    /* CTRL+SHIFT+F<num shown in autocomplete window> * after typing in a function name will show its src */ DirMk(\"folder\"); Dir; Dir(\"fold*\");//supports wildcards Cd(\"folder\"); Man(\"Ed\"); Ed(\"file.HC.Z\"); Unzip(\"file.HC.Z\"); Zip(\"file.HC\"); Find(\"str\",,\"-i\");//\"-i\" is for case-sensitivity (grep -rn . -e str) FF(\"file.*\");//find .|grep file RedSeaISO(\"Something.ISO.C\",\"Community\");//archive folder into an ISO MountFile(\"Something.ISO.C\");//defaults to M Cd(\"M:/\"); *0=0;//Raise the debugger DbgHelp;//help on how to debug Shutdown;\n\n# Credits\n\n  * argtable3\n  * qprocessordetection.h\n  * dyad\n  * map\n  * vec\n  * isocline\n  * templeos-loader\n\nPeople:\n\n  * nrootconauto for working on the Wiki\n\n## About\n\nRun TempleOS in user space\n\n### Topics\n\nc assembly x86-64 templeos holyc\n\n### Resources\n\nReadme\n\n### License\n\nZlib license\n\nActivity\n\n### Stars\n\n16 stars\n\n### Watchers\n\n2 watching\n\n### Forks\n\n3 forks\n\nReport repository\n\n## Releases\n\nNo releases published\n\n## Packages 0\n\nNo packages published\n\n## Languages\n\n  * HolyC 96.6%\n  * C 3.1%\n  * Other 0.3%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": true}
