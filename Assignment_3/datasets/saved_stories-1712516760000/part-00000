{"aid": "39960483", "title": "A System for the Sixties: The RCA Studio II", "url": "https://nicole.express/2024/radio-keith-orpheum.html", "domain": "nicole.express", "votes": 1, "user": "GavinAnderegg", "posted_at": "2024-04-07 13:03:45", "comments": 0, "source_title": "A System For The Sixties: The RCA Studio II", "source_text": "A System For The Sixties: The RCA Studio II\n\n# A System For The Sixties: The RCA Studio II\n\nApr 7, 2024\n\nDid you ever hear of the tragedy of the Capacitance Electronic Disc? I thought\nnot. It\u2019s not a story MCA would tell you. It\u2019s an RCA legend. It\u2019s said they\nhad a laboratory so advanced, that in 1972, they could put a video on a vinyl\nrecord. The only thing they were unable to do was commercialize it, which of\ncourse, eventually they had to. Ironic. They could develop amazing technology,\nbut it could never leave the lab. Oh yeah, and they had done the same thing\nwith video games a few years before.\n\n## Don\u2019t ask about the Studio I\n\nThe RCA Studio II is an easy console to mock. It\u2019s black and white. The\nresolution is 64x32, a simple framebuffer, no sprites. The console came out\nlater than the full-color Fairchild Channel F and the phenomenon Atari 2600.\nAnd there was a weird idea of \u201cgames\u201d too. Even in the advertisement above,\nwhat are they playing? Patterns, a built-in title where you press keys to make\ndifferent random patterns. No, that\u2019s really it.\n\nEven in 1977, that was a bit much. I mean, we had had nearly a decade of Pong\nconsoles by that point, right? So what\u2019s the point, just its nice 1960\u2019s cream\nhome appliance look?\n\nWell, there are glimmers of something interesting here. There\u2019s a historic\ninterest: Joyce Weisbecker, generally considered the first female console game\ndeveloper and often also the first indie developer, programmed for it. And\nthere\u2019s a story behind its CPU. It\u2019s got a lot of memory on its system bus,\n512 bytes (though half of that is the framebuffer). And that hardware has a\nvery interesting story.\n\n## The COSMAC Chipset\n\nThe CPU of the RCA Studio II is an RCA CDP1802, running at 1.78MHz. That\u2019s\nsome pretty good speed, but the CPU itself is of historical interest as well.\nIt\u2019s also known as the COSMAC, was the first chip to be made using the CMOS\nprocess, and oh yeah, went to space. That CMOS process, which produced low\npower static logic, helped there too, as it\u2019s more resistant to cosmic rays.\n\nThe CDP1802 was the core of a popular kit computer, the COSMAC ELF. If you\ncouldn\u2019t afford the big S-100 bus CP/M computers that cost hundreds of\ndollars, in 1976 you could build one of these and get some computer\nexperience. The CDP1802 lent itself well to this feature because of its\nprimitive \u201cDMA\u201d functionality; essentially, the chip could be used to access\nmemory, writing or reading directly for another peripheral. On the COSMAC ELF,\nthat allowed you to write your bootstrap program directly to RAM one byte at a\ntime, with no ROM and very few support chips.\n\nThe CDP1802 datasheet is worth a read. The chip has sixteen sixteen-bit\nregisters, which is quite a lot for the time. And the registers are very\nflexible; any of them can serve as the program counter at any given time. For\na CPU with 16-bit registers it\u2019s also one of the most 8-bit CPUs I\u2019ve ever\nseen. For example, branch instructions only can branch within a 256-byte\n\u201cpage\u201d; if you think of a 16-bit address as 0xABCD, a branch only lets you\ncontrol the CD. Compare this to the 6502, where the 8-bit branch value is\nadded to the program counter as a signed number, and you can pass over that\npage boundary. (And the 6502 is more 8-bit than the Z80, which can even do\nsome 16-bit math in a single instruction)\n\nThat might make more sense when you look at the block diagram of the CDP1802.\nNotice that there are only eight external pins on the address bus; the chip\nhas a multiplexer to switch between the high eight bits, and the low eight\nbits. (This also complicates your memory access, of course)\n\nNow let\u2019s say you wanted some graphics. You could buy the COSMAC VIP, a more\nenthusiast focused niche machine in the 1977 computer space in the end, though\nit was also more affordable than the 1977 \u201cTrinity\u201d machines.\n\nBut in the DIY spirit of the RCA CDP family, you could also buy the CDP1861\nvideo chip and well, do-it-yourself. This graphics chip is known as \u201cPixie\u201d\ngraphics, and uses those DMA cycles to load graphics data from the system RAM,\nat a 64 pixels wide by 128 pixels tall monochrome resolution. Which isn\u2019t\nterrible, considering, though it\u2019s a bit low-res for the text-based\napplications that the Apple ][, Commodore PET, and Tandy TRS-80 all excelled\nat.\n\nThe amount of computers and game consoles that used this hardware is wild.\nTake a look at all the machines that the Emma 02 emulator supports for a\ntaste\u2013 including even modern CDP1802 hobbyist machines like the \u201cMembership\nCard\u201d. The RCA CDP1802 family gave a lot of hobbyists their first taste of\ncomputing.\n\n### RCA\n\nAnd arguably, it all came about because RCA didn\u2019t know what to do with it.\nLet\u2019s take a look at that article again. Specifically, the author.\n\nJoseph Weisbecker didn\u2019t just encourage hobbyists to use the chip. He made the\nchip. He built prototype machines out of discrete logic circa 1970, known as\n\u201cFRED\u201d, to prove its design. Unfortunately, they seemed reluctant to really\nget behind Weisbecker\u2019s invention for home computing, instead trying and\nfailing to sell it to markets like arcade games. It\u2019s easy to see his Popular\nComputing article as just an attempt to get someone to use it.\n\nNow, to be fair to RCA, in 1971 they sold off their mainframe computer\ndivision that had competed with IBM, and having made pretty much nothing but\nmassive losses over that division\u2019s life, they didn\u2019t want to get back into\nanything that smelled of computer. But given that in the 1970s they instead\ninvested in things ranging from TV dinners to rental cars, maybe we can\ncriticize them a little bit.\n\nRCA had the CDP1802 in 1974 (and a two-chip version earlier), and the CDP1861\nPixie graphics chip in 1975. Look at the RCA Studio II circuit board again:\nit\u2019s the CDP1802 (white chip to the right), the Pixie graphics, RAM and ROM.\nIt really should\u2019ve been able to beat Fairchild and Atari to market handily.\nThe COSMAC VIP should\u2019ve been earlier than any of the \u201cTrinity\u201d.\n\nShould have, should have. But instead, we got what we got.\n\n## Studio II\n\nNow, there are two pieces of information in the above post that might seem a\nlittle contradictory.\n\n  * \u201cThe RCA Studio II is an easy console to mock. It\u2019s black and white. The resolution is 64x32...\u201d\n  * \u201cThis graphics chip is known as \u2018Pixie\u2019 graphics... at a 64 pixels wide by 128 pixels tall monochrome resolution. Very nice.\u201d\n\nThese two don\u2019t add up. 32 pixels high versus 128 pixels high is a significant\ndifference!\n\nThe CDP1861 \u201cPixie\u201d graphics chip displays 15kHz graphics intended to be\ndisplayed on a regular consumer TV. So those 128 vertical lines are the 128\nscanlines that graphics are displayed on\u2013 so if you thought the borders on the\nCommodore 64 (which has a 200 pixel display area) were bad, you\u2019ve not seen\nanything.\n\nTo achieve synchronization with the television using the limited CDP1802 DMA,\nthe timing required is very precise. This places some constraints on the\nprogrammer:\n\n  * Instructions that take three clock cycles should be avoided, as the program must complete an even number of cycles between interrupts. This includes \u201clong branches\u201d (jumps), so this is kind of an annoying constraint. (It also includes NOP)\n  * The interrupt routine must load the first line to be drawn into the DMA register, and again, must take an even number of cycles.\n\nThe interrupt runs once, at the start of display, and from then on is using\nDMA cycles to grab the memory while the processor can go back to whatever it\nis doing (with an even number of cycles!). But the datasheet recognizes that\n64x128 is a lot of RAM, and provides an option for lower resolutions. It\u2019s not\nquite as simple as just a mode change, though.\n\nSpecifically, to get a lower resolution, you \u201cjust\u201d need to time your CPU\ninterrupt function so that it\u2019s constantly overwriting the DMA address every\nsingle scanline; therefore, the lower vertical resolution is just reusing the\nprevious line a few times before finally letting it advance. This saves a lot\nof RAM\u2013 but it also means that the interrupt is now running for the entire\nvisual area of the screen, so none of your game code can run then.\n\nThe Pixie screen is 266 scan lines, so you lose about half your CPU time doing\nthis. RAM was expensive in the 1970\u2019s, so that was a win. Even on the COSMAC\nVIP with its luxurious 2kiB of RAM, it was pretty common to use this low\nresolution system.\n\n### Scripting\n\nThe constraints of the Pixie graphics system put a lot on the programmer.\nSince the RCA Studio II included built-in games in ROM anyway, it was pretty\nstraightforward to also include an interpreted programming language. Running\nin the interpreter, you didn\u2019t need to care about the timing requirements, and\ncould also use some helper functions for putting graphics on screen.\n\nThat\u2019s right\u2013 for the most part, RCA Studio II games were generally written in\nbytecode, not in pure assembly like the competitor consoles. It was possible\nto jump out of the interpreter into assembly if you needed to, but I\u2019m not\nsure how often it was done.\n\nYou might wonder if this is the same as CHIP-8. CHIP-8 was a famous\ninterpreted bytecode language that had a 64x32 resolution, and is still\npopular today as a superminimal computer, and a target for beginning emulator\ndevelopers. It was developed on the COSMAC VIP by Joseph Weisbecker to solve\nliterally the same problem, so it\u2019d make sense that it was the same.\n\nBut the \u201cportable assembly language\u201d on the Studio II not exactly the same.\nThe biggest difference are those graphics handling functions, which are kind\nof a primitive form of software sprites, using XOR as a kind of collision\ndetection.\n\nAnother fun thing about the cartridges for the RCA Studio II is that RCA\nmanufactured everything in-house. That means that you get these single ROM\nchips, that just listen to the whole data bus. They also handle the weird\nmultiplexed address bus I mentioned above. Paul Robson explains how the\ncatridge bus works pretty well.\n\nI\u2019d show you the inside of my cartridge, except RCA riveted the cartridges\nshut. This system is so weird. Another thing about these cartridges, made\npossible by RCA\u2019s pseudo-assembly, is that they are tiny. The smallest Atari\n2600 and Channel F games are 2kiB. TV Arcade III - Tennis/Squash is 768 bytes\u2013\nif you take a ROM you downloaded from the internet, anyway. (I won\u2019t tell RCA\nif you don\u2019t)\n\nSee, the memory map of the Studio II is very flexible, since the games are\ntiny and the vast majority of the 16-bit address is wide open. (Well,\nactually, the console\u2019s RAM is mirrored anywhere that ROM isn\u2019t present, but\nthat\u2019s not important) So the community developed the .ST2 file format that\nallows arbitrary mapping of the memory pages. That takes up 128 bytes of our\nheader\u2013 TV Arcade III is actually a measly 512 bytes. I can barely get through\na sentence without using that many. I mean, I know it\u2019s just monochrome Pong,\nbut...\n\nConsole| Smallest commercial game| ROM Size| Mega Power  \n---|---|---|---  \nRCA Studio II| TV Arcade I - Space War| 256 bytes| 0.002  \nFairchild Channel F| Space War| 2kiB| 0.015  \nAtari 2600| Combat| 2kiB| 0.015  \nNintendo Famicom| Galaxian| 16kiB (8kiB PRG + 8kiB CHR)| 0.125  \nSNK Neo Geo| League Bowling| 3,328kiB| 26  \n  \n512 bytes is also the size of an IBM PC floppy disc boot sector, so any boot\nsector games would also fit in that size. But as far as I know that's just a\nchallenge by developers looking to push the size limits of code, not a\ncommercial product like RCA was selling.\n\nThe homebrew game Magic Floor for the Famicom/NES uses a clever solution to\nnot have any on-board CHR ROM or RAM, and it appears that it's actually just\n4kiB of PRG in actual use. But again, this doesn't count homebrew games.\n\n## And now, the problem\n\nSo, this post has been remarkably low on pictures of the RCA Studio II, or\nscreenshots from it in action. Which is odd. I mean, I do have an RCA Studio\nII, don\u2019t I? Yes! And it even sprouted some tails.\n\nI do. And this hasn\u2019t been easy to reach this point! The RCA Studio II is RF-\nonly, and even worse, required a special RF box that also provided power. The\nmods required are straightforward but still a bother, as the RF box of mine is\nlong gone.\n\nAn RF signal is basically pure AC, while a power signal is basically pure DC,\nas long as it's good quality power. So it's fairly straightforward to filter\nand separate them at either end. The Atari 5200 did the same thing. However,\ngiven that there's no real benefit to do this, and RF boxes are otherwise\neasily mass-produced, it might be taken as a decent sign that the engineers\nwere given a bit too much freedom with the product and are having too much\nfun.\n\nBut unfortunately, despite all that, my Studio II is not working. The Pixie\nseems to be working\u2013 I get a black image, but it does have active sync, which\nis the Pixie\u2019s main job in life.\n\nHah, jokes on you, that was actually Space Harrier running on the SuperGrafx.\nBut it\u2019s the same concept.\n\nI did try some troubleshooting; the Pixie working but not displaying an image\ncould be an issue with those RAM chips, for example, and it is actually not\ntoo hard to find new ones today. Given how quickly they broke in half after\nremoval, there may have been something wrong with them, but it didn\u2019t solve\nthe issue.\n\nThat leaves the ROM or the CDP1802 CPU; both of which are proprietary. In many\ncases you could just use an EEPROM, but remember that weird multiplexed\naddress bus layout? It\u2019s a little more complicated. And I still haven\u2019t\nconfirmed the CDP1802 itself is good.\n\nOne thing I do know is good at least is the speaker, which like a Pong console\nis on the circuitboard, and on mine, turns on immediately on full blast\nwhenever power is applied.\n\nAn interesting thing about the speaker circuit is that it\u2019s a 555 timer which\nis directly controlled by a single bit coming off of the CDP1802. In fact,\nCDP1802 assembly contains two instructions, REQ and SEQ, whose only purpose is\nto control the Q output, setting it high or low. Obviously, this isn\u2019t good\nfor much more than a beep.\n\nBy the way, it\u2019s worth noting that the Studio II doesn\u2019t actually boot to the\ncartridge, so I can\u2019t use that to test whether the system works. It always\nboots to the internal ROM first.\n\n## Why aren\u2019t we using the Studio XI today?\n\nSo that\u2019s the RCA Studio II. I\u2019d really like to get mine working, but more to\ntry to mess with the Pixie chip than to actually run the built-in games. I\u2019m\ncurious if it\u2019s possible to build a cartridge with RAM onboard that can take\nover the internal ROM\u2019s interrupt, and allow the Pixie to act as 128x64, using\nadditional RAM to really unlock the additional power.\n\nBut for now I\u2019m happy to have it as a historical artifact, even if mine\ndoesn\u2019t quite work. And while this post has lingered for awhile (I actually\ngot this... over a year ago), I\u2019m happy to get the story of this interesting\nconsole out there too. Because there\u2019s another chapter.\n\nLook forward to it!\n\n## Nicole Express\n\n  * Nicole Express\n  * nicole at nicolebranagan dot com\n  * Toggle dark mode\n\n  * @nicole@bitbang.social\n  * nicolebranagan\n  * Patreon\n\nNicole Express: Video game development, examinations into old consoles, and\nmore!\n\n", "frontpage": false}
