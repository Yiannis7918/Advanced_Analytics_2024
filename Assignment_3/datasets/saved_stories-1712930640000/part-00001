{"aid": "40010375", "title": "Intel's Newest Software for Achieving Greater Performance: Thin-Layout-Optimizer", "url": "https://www.phoronix.com/news/Intel-Thin-Layout-Optimizer", "domain": "phoronix.com", "votes": 1, "user": "scns", "posted_at": "2024-04-12 08:02:39", "comments": 0, "source_title": "Intel's Newest Software Effort For Achieving Greater Performance: Thin Layout Optimizer - Phoronix", "source_text": "Intel's Newest Software Effort For Achieving Greater Performance: Thin Layout\nOptimizer - Phoronix\n\n  * Articles & Reviews\n  * News Archive\n  * Forums\n  * Premium Ad-Free\n  * Contact\n  * Popular Categories\n  * Close\n\n  * Articles & Reviews\n  * News Archive\n  * Forums\n  * Premium\n  * Contact\n  * Categories\n\nComputers Display Drivers Graphics Cards Linux Gaming Memory Motherboards\nProcessors Software Storage Operating Systems Peripherals\n\n# Intel's Newest Software Effort For Achieving Greater Performance: Thin\nLayout Optimizer\n\nWritten by Michael Larabel in Intel on 11 April 2024 at 05:00 PM EDT. 7\nComments\n\nIntel's software team is today sharing their newest innovation for achieving\ngreater performance on Linux systems: the Thin Layout Optimizer. Intel's Thin\nLayout Optimizer is inspired by the likes of the Meta/LLVM BOLT optimizer and\nGoogle's Propeller but aims to be much easier to use while still delivering\nmeasurable performance gains for optimized binaries.\n\nLLVM's BOLT has been around for a few years and optimizes the code layout of\nbinaries for healthy performance gains. Meta/Facebook upstreamed this Binary\nOptimization Layout Tool to LLVM and it's shown the ability to deliver nice\nperformance gains. BOLT'ing a binary is a bit of a chore with first needing to\ncompile the codebase, generating the performance profile, and then running\nBOLT to optimize the code layout of the binary. The Thin Layout Optimizer\nGitHub page describes BOLT drawbacks as not being able to guarantee\ncorrectness and greater speed and memory requirements. Propeller drawbacks are\ndescribed as requiring Clang/LLD, significant changes to a program's build\nprocess, and not being too suitable for general use or package distributions.\n\nIntel's Thin Layout Optimizer still relies on needing a performance profile\nbut Intel engineers put much greater emphasis on ease-of-use and making it\nmore portable for integrating into different build processes. The Thin Layout\nOptimizer also doesn't require any intermediate binaries for use. The Thin\nLayout Optimizer relies on perf for recording a profile, Python scripts\nconveniently package up the end result, and then thin-layout-optimizer command\nthen carries out the optimization task for binaries.\n\nThe Thin Layout Optimizer Wiki explains of their design approach:\n\n> \"Thin-Layout-Optimizer is a new code-layout optimizer that primarily\n> emphasizes ease of use and ease of adoption while remaining competitive in\n> performance compared to BOLT/Propeller.\n>\n> Like BOLT/Propeller, Thin-Layout-Optimizer operates on profiles generated\n> with Linux perf and LBR.\n>\n> Thin-Layout-Optimizer does not disassemble the binary, but rather works as a\n> section reordered via linker scripts similar to Propeller.\n>\n> Unlike Propeller however, it does not require basic-block sections, and\n> works with any section granularity. An effective granularity is function-\n> sections (-ffunction-sections) which is both near universally supported and\n> provides a reasonable basis for reordering optimizations.\n>\n> Further, it does not require any changes to the linker command and instead\n> operates transparently by use of environment variables.\n>\n> Finally, it transparently scales to an arbitrary number of packages and\n> requires little to no incremental changes.\"\n\nThe Thin Layout Optimizer is already being used by Intel's in-house Linux\ndistribution, Clear Linux, which is known for delivering the best out-of-the-\nbox Linux x86_64 performance. Clear Linux packages have already quietly begun\nleveraging the Thin Layout Optimizer for achieving even better performance in\n2024.\n\nThere's also this graphic from the Intel Wiki to provide a high level overview\non the Thin Layout Optimizer process:\n\nThe Wiki page closes with this summary:\n\n> \"Thin-Layout-Optimizer is a new code-layout optimizer we are happy to be\n> releasing. It is still in its infancy and there is a lot of room for\n> improvement, but we believe its emphasis on usability and transparent\n> scalability will be valuable, and hope that if you have been weary of\n> integrating prior code-layout optimization tools into your workflow, this\n> might change your mind.\"\n\nI'm still diving through the Thin-Layout-Optimizer now having access,\nhopefully will be able to setup some of my own benchmarks soon. With Intel's\nown tests they are finding around 4% better performance when optimizing LLVM\nas a test example. That's less than the ~7.5% of using BOLT but with the Thin-\nLayout-Optimizer having the benefit of being more adaptable and easier to\ndeploy.\n\nThose wishing to learn more about the Thin Layout Optimizer or try out the\nopen-source (MIT-licensed) code can find it via intel/thin-layout-optimizer on\nGitHub.\n\n7 Comments\n\nTweet\n\nRelated News\n\nTurbostat Becomes Semi-Useful To Non-Root Users\n\nIntel FFmpeg Cartwheel 2024Q1 Brings New Filter To Transform Old Content\n\nIntel Updates OpenCL Intercept Layer With New Abilities\n\nMesa Adds PCI IDs For Intel Arc Graphics A580E & A750E\n\nIntel QAT Driver Preps Live Migration Support For Linux 6.10\n\nIntel HFI Driver Will Quit Wasting CPU Cycles With Linux 6.10\n\nAbout The Author\n\nMichael Larabel is the principal author of Phoronix.com and founded the site\nin 2004 with a focus on enriching the Linux hardware experience. Michael has\nwritten more than 20,000 articles covering the state of Linux hardware\nsupport, Linux performance, graphics drivers, and other topics. Michael is\nalso the lead developer of the Phoronix Test Suite, Phoromatic, and\nOpenBenchmarking.org automated benchmarking software. He can be followed via\nTwitter, LinkedIn, or contacted via MichaelLarabel.com.\n\nPopular News This Week\n\nGCC 14 Boasts Nice ASCII Art For Visualizing Buffer Overflows\n\nUbuntu 24.04 Beta Delayed Due To XZ Nightmare\n\nKDE On The Importance Of Wayland Explicit Sync\n\nx86-64-v5? Questions Arise Over The Future Of x86-64 Micro-Architecture\nFeature Levels\n\nNetplan 1.0 Is Ready To Go For Ubuntu 24.04 LTS\n\nArch Linux Increasing Its vm.max_map_count To Help Steam Play Games & Other\nSoftware\n\nUbuntu Maker Canonical Announces New Collaboration With Qualcomm\n\nNew EEVDF Linux Scheduler Patches Make It Functionally \"Complete\"\n\nLatest Linux News\n\nIntel's Newest Software Effort For Achieving Greater Performance: Thin Layout\nOptimizer\n\nX.Org Server Change Allows GLAMOR To Fallback To Software Rendering For\nObsolete GPUs\n\nGCC 14 Compiler Adds AArch64 GNU/Hurd Support\n\nUbuntu 24.04 Beta Now Available For Testing\n\nOpen-Source Radeon Driver Enables Support For Vulkan Video H.264/H.265 Encode\n\nWayland 1.23 Planned For Release Around The End Of May\n\nBcachefs Sees More Fixes For Linux 6.9-rc4, Reiterates Its Experimental Nature\n\nLutris 0.5.17 Game Manager Brings Bug Fixes, Library Syncing & New Runners\n\nKDE's KWin Merges Wayland Explicit Sync Support\n\nLavapipe CPU-Based Vulkan Driver Implements Ray-Tracing Pipelines\n\nShow Your Support, Go Premium\n\nPhoronix Premium allows ad-free access to the site, multi-page articles on a\nsingle page, and other features while supporting this site's continued\noperations.\n\nLatest Featured Articles\n\nUbuntu 24.04 Brings Some Performance Gains For AMD Threadripper 7980X /\nSystem76 Thelio Major\n\nIntel Announces Gaudi 3 AI Accelerator, Intel Xeon 6 Brand\n\nAMD Radeon Linux Gaming Performance At Parity Between KDE Plasma 6.0 X11 vs.\nWayland\n\nIntel Xeon Max Sees Some Performance Gains For OpenVINO & ONNX With Linux 6.9\n\nCrucial T705 PCIe 5.0 NVMe SSD On Linux\n\nSupport Phoronix\n\nThe mission at Phoronix since 2004 has centered around enriching the Linux\nhardware experience. In addition to supporting our site through\nadvertisements, you can help by subscribing to Phoronix Premium. You can also\ncontribute to Phoronix through a PayPal tip or tip via Stripe.\n\nPhoronix Media\n\n  * Contact\n  * Michael Larabel\n  * OpenBenchmarking.org\n\nPhoronix Premium\n\n  * Support Phoronix\n  * While Having Ad-Free Browsing,\n  * Single-Page Article Viewing\n\nShare\n\n  * Facebook\n  * Twitter\n\n  * Legal Disclaimer, Privacy Policy, Cookies | | Contact\n\n  * Copyright \u00a9 2004 - 2024 by Phoronix Media.\n\n  * All trademarks used are properties of their respective owners. All rights reserved.\n\n", "frontpage": false}
