{"aid": "39964777", "title": "Zero-Sized IntersectionObserver Targets", "url": "https://irreducible.io/experiments/2024/04/zero-sized-intersection-observer/", "domain": "irreducible.io", "votes": 1, "user": "irreducible", "posted_at": "2024-04-07 23:13:42", "comments": 0, "source_title": "Irreducible", "source_text": "Irreducible\n\n# Zero Sized Intersection Observers\n\nTaylor Hogge\n\nApr 06, 2024\n\nThe IntersectionObserver spec is ambiguous in it's treatment of zero-sized\nelements. This results in inconsistent behavior across platforms. Developers\nshould avoid observing zero-sized elements using the IntersectionObserver API.\n\nA common solution to implement infinite-scroll is to place a marker element at\nthe end of a scroll container. That element is observed using the\nIntersectionObserver API. When the observed element scrolls into view, you\nknow you are at the bottom of the scroll container and you can fetch the next\npage of data.\n\n    \n    \n    <ul> <li>One</li> <li>Two</li> ... <li>Fifty</li> <div id=\"loadMore\"></div> </ul>\n\nAs is, this layout does not work across platforms. The IntersectionObserver\nspec states that the threshold value is used to configure what percentage of\nthe observed element must be visible before triggering the callback. So what\nhappens if the target element has zero size? To compute this percentage you\nwould have to divide by zero. The spec is clear that a threshold of zero is\neffectively \"any non-zero number of pixels\". However, it makes no comment on\nhow zero-sized elements should be handled. One could make the argument that\nthe empty element is fully contained by the viewport once visible and should\ncount as an intersection.\n\nThe w3c added the isIntersecting flag partially for this purpose but never\ndisambiguated how zero-sized elements should interact with the threshold value\nin order to trigger the observer callback. Because of this, there is platform-\ndependent behavior with this edge case.\n\nAs written, the code above will trigger the observer callback on MacOS\n(Firefox and Chrome) but not on Windows (Chrome). In order to ensure\nconsistent behavior across platforms, developers should always add some\ncontent to elements observed by the IntersectionObserver API.\n\n    \n    \n    <ul> <li>One</li> <li>Two</li> ... <li>Fifty</li> <div id=\"loadMore\" style=\"visibility: hidden\">LOAD MORE</div> </ul>\n\n## Contact\n\ntaylor@irreducible.io(801)-203-0432\n\n# Irreducible\n\nadj.\n\nIncapable of being reduced, simplified, or broken down into smaller parts,\noften indicating a fundamental or unchangeable nature.\n\n\u00a9 2024 Irreducible Software LLC. All rights reserved.\n\n", "frontpage": false}
