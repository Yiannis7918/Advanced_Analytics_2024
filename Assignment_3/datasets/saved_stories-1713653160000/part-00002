{"aid": "40098634", "title": "Adding the \"Move to Trash\" function to System 7.1", "url": "https://blog.gingerbeardman.com/2024/04/12/adding-the-move-to-trash-function-to-system-7/", "domain": "gingerbeardman.com", "votes": 1, "user": "msephton", "posted_at": "2024-04-20 16:44:51", "comments": 0, "source_title": "Adding the \u201cMove to Trash\u201d function to System 7.1 \u2318I Get Info", "source_text": "Adding the \u201cMove to Trash\u201d function to System 7.1 \u2318I Get Info\n\n\u2318I Get Info\n\n  * by Matt Sephton\n  * RSS\n  * Tags\n  * Twitter\n\n# Adding the \u201cMove to Trash\u201d function to System 7.1\n\n2024-04-20 \u2022 edited \u2022 6 mins read #hack #keyquencer #macintosh #system7\n\nFirst, a little bit of Macintosh History. You probably know that on modern\nmacOS you can select a file in Finder, on your Desktop, or in an app, and send\nit to the Trash by choosing the Move to Trash menu item, or by pressing\nCmd+Backspace/Delete. This keyboard shortcut was added in System 7.5.3 where\nit was largely unadvertised and somewhat of a secret feature, but quickly\nbecame indispensable for those who knew. Of course, these days it is proudly\ndisplayed in macOS Finder menu.\n\nFast forward to today, when James Wages asked about a good way to do this on\nSystem 7.1, and posed a partial solution along with a challenge. But we\u2019ll get\nto that in a moment. Since I regularly use System 7 on my iPad Pro I\u2019d also\nmissed this function and had come up with a few different workarounds to map\nMove to Trash to Cmd+Backspace/Delete.\n\n  1. KeyQuencer\n  2. FinderHack & KeyQuencer\n  3. FinderHack & HexEdit Bonus:\n  4. KeyQuencer, Redux\n\n## KeyQuencer\n\nThe first workaround was to script a KeyQuencer macro to simulate the mouse\ndrag of the selected item to the trash can. This relied on you positioning the\nmouse pointer over the selected file and also making sure the Trash icon was\nalways in the required position on screen. It worked, but it was less than\nideal because it was far too fragile. I\u2019ll leave reproducing this as an\nexcercise for the reader.\n\n> KeyQuencer is one of my favourite and most used classic Macintosh apps,\n> written by prolific Italian developer Alessandro Levi Montalcini who is\n> still developing useful things today! Anyway, it could be used for a wide\n> variety of macro and automation purposes. It was very versatile as it\n> contained its own scripting language and a dictionary of functions that\n> touched most aspects of System 7. I use it to map all sorts of esoteric\n> functions to hotkeys, like changing screen resolutions and colour depth, or\n> performing complicated multi-step tasks on a single key stroke. An\n> equivalent for modern macOS is Keyboard Maestro, which is no doubt more\n> capable but also more difficult to use.\n\n## FinderHack\n\nSo, James mentioned FinderHack which is a system Extension that gave earlier\nversions of System 7 a similar set of Finder features to those introduced in\n7.5.3. But, crucially, it mapped the Move to Trash hotkey to Cmd+T, which is\ndifferent enough to become annoying as you can no longer rely on muscle\nmemory. The challenge: how can we map this to the modern Cmd+Backspace/Delete\nshortcut?\n\nSo, I turned to KeyQuencer once again and created a short macro which would\ntype the Cmd+T key combination and I assigned it to Cmd+Backspace/Delete. It\nworked! Pressing my hotkey typed the FinderHack hotkey.\n\nThis macro, bound to Cmd+Backspace/Delete, types Cmd+T to effectively map one\nhotkey to another\n\nSo we already have a good solution but resources are often scarce on classic\nMacintosh, so I wondered if I might be able to cut out the middleman and\nchange the keyboard shortcut by modifying FinderHack directly. James had\nnoticed that ResEdit would not allow you to type the Backspace character. I\nconfirmed the same was true in Resorcerer. So, what to do?\n\n## HexEdit\n\nOpening FinderHack directly in HexEdit we can scroll down a little to find the\nmenu definitions, find \u201cMove to Trash\u201d and can change the following hex value\nfrom 54 (\u201cT\u201d) to 08 (\u201cBackspace/Delete\u201d), those being ASCII values, and\nreminding ourselves that the Backspace/Delete key is different than Forward\nDelete key on some Apple keyboards that have both.\n\nThe final modified file is up over at Macintosh Garden:\nhttps://macintoshgarden.org/apps/finderhack\n\nNotice that System 7 has no glyph for the Backspace key\n\nRemoving the confirmation alert\n\nI asked about removing the confirmation alert that appears after pressing the\nhotkey, and on 68KMLA.org user cheesestraws (thanks!) came up with a solution\nthat involved NOPing out the Alert syscall setup, invokation, and return, and\nmaking the comparison that usually checks the alert button always default to\nthe OK. I was so close to figuring out this solution myself, but I lacked a\nkey bit of knowledge for how to figure out the hex code for a totally new\ninstruction. Well, now I know how to do that! Here\u2019s all the details of how to\nchange the machine code.\n\nOnce this was done it became obvious how much of a hack FinderHack really is.\nAfter deleting the file the icon of the now missing file persists in Finder\nfor up to a few seconds on my emulated Mac, and up to 20 seconds on period\nhardware! This is unacceptable, so I had to go deeper.\n\n## KeyQuencer, Redux\n\nI went back to old faithful, KeyQuencer, to see if there was a way I could\nforce Finder to refresh the icon more quickly. Whilst I was reading the docs I\nsaw the following:\n\n    \n    \n    What Is KeyQuencer? KeyQuencer is a utility that lets you create shortcuts, called macros, that perform a series of tasks with a single keystroke. A macro is a set of instructions that KeyQuencer uses to perform a task on a computer, for example you can use KeyQuencer macros to: * Apply shortcuts directly to the current Finder selection, like moving items to the Trash.\n\nWell! It turns out KeyQuencer could have solved our problem from day one!\nLesson learned: RTFM.\n\nSo, how do we go about setting up KeyQuencer to enable this feature? Well,\nbefore we get to that let\u2019s talk about how KeyQuencer does its thing. It\nconsists of three main parts:\n\n  1. KeyQuencer Engine\n  2. one or more KeyQuencer Extensions\n  3. KeyQuencer Panel/Editor\n  4. one or more KeyQuencer Macros\n\nThe beating heart of KeyQuencer is the KeyQuencer Engine system extension that\nlives in the usual System/Extensions folder, along with a folder in System\ncalled KeyQuencer Extensions that contains KeyQuencer\u2019s own type of\nextensions. Still with me?\n\nInside the KeyQuencer Extensions folder you put any KeyQuencer Extension files\nthat you want to use, by copying them from the KeyQuencer installation folder.\nThis was a method to keep memory usage low by only loading the functions\nyou\u2019re using rather than the whole suite. So if you\u2019re using a function from\nthe File category, you copy the \u201cFile\u201d KeyQuencer Extension in there.\n\nOnce all that is set up you can create/add KeyQuencer Macros, using either\nKeyQuencer Panel or Editor. There are lots of sample macros to get started,\nand many were made and shared by the community. Eventually you can construct\nyour own macro, which is what I\u2019ll do.\n\nStep by step: words\n\n  1. Download KeyQuencer 2.5.6 which gives us a folder called KeyQuencer 2.5.6 99/07/18 and copy the following files to their destinations:\n\n     * KeyQuencer Engine goes in System/Extensions\n     * KeyQuencer Panel goes in System/Control Panels\n     * KeyQuencer Extensions/Archive and Files/File goes in System/KeyQuencer Extensions (create the destination folder)\n  2. Install AppleScript 1.1 Finder Scripting Software (this is the updated Scriptable Finder 7.1.3 and Finder Scripting Extension)\n  3. Restart the Macintosh when prompted\n  4. Create the Macro (you could also copy and paste it from a sample macro file):\n\n     * Open KeyQuencer Panel control panel\n     * Inside the panel choose File > New Macro\n     * Give the macro a name: \u201cMove to Trash\u201d\n     * Give the macro a hotkey: Cmd+Backspace/Delete\n     * Enter the macro script: File move selected to trash enforce by pasting, typing, or using the gui\n     * Click OK\n  5. Select some files and press Cmd+Backspace/Delete to move them to the trash!\n\nStep by step: video\n\nHere\u2019s a screen recording of me doing the above on a fresh System 7.1:\n\n\\-- Originally published: 2024-04-12 -- Enjoyed this blog post? Send blog\nthanks! Pay what you want, using PayPal or Stripe -- Comments: @gingerbeardman\n\nPrevious Post Remote monitoring a web server job queue\n\nNext Post\n\nPer-game skins in the Delta classic video game emulator for iOS\n\ntag cloud: 1bit 1bitwoodblocks 3ds 60fps amiga animation apple appletv\nappstore arcade archaeology art artist atarist audio automation bandkun\nbarbaranessim basiliskii becker best birthday cars controllers credits\ncritique dailydriver deneba dreamcast dsiware electronics emulation extension\nfamicom foretrack game gamedev gameplay gba golf graphics guide hack hanafuda\nhardware history hypercard icarus internetarchive interview ios itchio\njapanese keyquencer koei koikoi maboshi macintosh macos mahjong maps\nmarchintosh markdown medium megadrive midjourney mmm mod modes msx music nes\nnintendo nintendo64 nintendods openscad palmos patreon pc pc98 physics piece\npixelart playdate playstation polarium popular preservation proxy recap\nrecommendations rendering reverseengineering review roundrobin rss save scans\nscript sfx snes software solitaire sonyreader sparrowsolitaire summary system7\nthoruyamamoto translation tv twitter ultrapaint ux videogame videogames wii\nwiiware windows workflow wwdc x68000 year yoyozo\n\n", "frontpage": false}
