{"aid": "40087897", "title": "Building a Pi Frigate NVR with Axzez's Interceptor 1U Case", "url": "https://www.jeffgeerling.com/blog/2024/building-pi-frigate-nvr-axzezs-interceptor-1u-case", "domain": "jeffgeerling.com", "votes": 5, "user": "mikece", "posted_at": "2024-04-19 15:17:30", "comments": 0, "source_title": "Building a Pi Frigate NVR with Axzez's Interceptor 1U Case | Jeff Geerling", "source_text": "Building a Pi Frigate NVR with Axzez's Interceptor 1U Case | Jeff Geerling\n\nSkip to main content\n\nJeff Geerling\n\n# Building a Pi Frigate NVR with Axzez's Interceptor 1U Case\n\nApril 19, 2024\n\nIn today's video, I walked through setting up Axzez's Interceptor 1U case with\na Raspberry Pi as a Frigate NVR, or Network Video Recorder.\n\nDoing so allows me to plug multiple PoE security cameras straight into the\nback of the device, and record their IP video streams to disk (the case has\nspace for up to 3 hard drives or SSDs). And by adding on a USB Coral TPU, I\ncan also run inference on frames where motion is detected, and identify\npeople, cars, bikes, and more using built-in object recognition models.\n\nThe video makes use of my open source pi-nvr project, which uses Ansible to\ninstall NVR software on a Raspberry Pi. A Raspberry Pi isn't a strict\nrequirement\u2014Frigate and other open source NVR apps run great on a wide variety\nof computers\u2014but it is efficient and well-supported. And, nowadays you can\nfind a Pi 4 or Pi 5 most anywhere.\n\nThe Axzez Interceptor makes use of the Compute Module 4, which exposes PCI\nExpress through it's board-to-board connector. This lets the Interceptor use\nup to 5 SATA connections for the hard drives, meaning using disks in RAID is\nmore reliable than if you were to plug them in using USB.\n\nA Pi 5 or future Compute Module 5 could increase bandwidth and likely support\n2-4x more cameras than the Compute Module 4, but I am only planning on\ndeploying four or five HD (1080p) cameras for now.\n\n## Optimizing Frigate on the Raspberry Pi\n\nUnless you've been under a rock, the past few years have changed a lot\nregarding the Raspberry Pi's value proposition as a tiny homelab PC. Between\nshortages and the first-ever price increase for the Pi 5 base model ($35 for 1\nGB Pi 4 to $60 for 4GB Pi 5), there are a lot of times when a used mini PC\ncould be a better value, even if it uses 1.5-2x more power at idle.\n\nEspecially considering the iGPUs built into more modern Intel mini PCs, they\nare a great value for a simple router, a small VM server running Proxmox, or\neven as a Frigate NVR box. You could even skip the Coral TPU if the built-in\niGPU is fast enough.\n\nBut the Pi is still a decent value\u2014and you don't need a more expensive Pi 5 to\nrun Frigate well.\n\nI have been exploring ways to optimize Frigate's performance on the Compute\nModule 4 and other Pi models, and here are a few quick wins\u2014which also help on\nfaster computers, but may not be as necessary:\n\n  * Don't use the camera's main stream for the detect role; you can use a 480p substream (some cameras even output 360p), and it will still have enough resolution for the Pi to process.\n  * Only use the full resolution stream (1080p or 4K) for the record role. It will be recorded in the background (if you choose), and any detected objects will save off clips using that raw recorded footage.\n  * Configure Frigate's storage to use NVMe or disk-based storage, don't have it write to eMMC memory or any kind of microSD card. Ideally, get NVR-ready hard drives, like WD's Purple / Surveillance line. They're designed for constant writes and some reads, and should work a little better for the purpose.\n\nI'm still trying to figure out how to speed up operations like exporting\nfootage either as timelapses or the realtime clips. Some things are limited by\nthe I/O of the Pi itself, and would benefit from running on a Pi 5 vs a Pi 4\nor CM4.\n\nWatch the full video with my build process and a bit more on Frigate setup on\nthe Raspberry Pi here:\n\n## Further reading\n\n  * Building a desktop Pi PC with Axzez's Interceptor\n\n  * Highly-condensed time-lapse footage with Frigate\n\n  * M.2 on a Raspberry Pi - the TOFU Compute Module 4 Carrier Board\n\nraspberry pi\n\nfrigate\n\nnvr\n\naxzez\n\nrack\n\nhomelab\n\nvideo\n\nyoutube\n\n  * Add new comment\n\nAll content copyright Jeff Geerling. Top of page.\n\n", "frontpage": true}
