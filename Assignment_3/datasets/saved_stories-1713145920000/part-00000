{"aid": "40033845", "title": "How macOS opens a file in the correct app", "url": "https://eclecticlight.co/2024/04/10/how-macos-opens-a-file-in-the-correct-app/", "domain": "eclecticlight.co", "votes": 3, "user": "CharlesW", "posted_at": "2024-04-14 19:49:33", "comments": 0, "source_title": "How macOS opens a file in the correct app", "source_text": "How macOS opens a file in the correct app \u2013 The Eclectic Light Company\n\nSkip to content\n\n# The Eclectic Light Company\n\nMacs, painting, and more\n\nhoakley April 10, 2024 Macs, Technology\n\n# How macOS opens a file in the correct app\n\nOne of the earliest and most distinctive features of the Mac was its ability\nto open a file using the right app simply by double-clicking or opening the\nfile. In the days of Classic Mac OS, that was accomplished using the infamous\nDesktop Database, which recognised files and apps by means of their Creator\nand Type, two codes consisting of four characters each. A great deal has\nchanged since, for the better. This process now relies on a chain of\ninformation to work out which app to launch to open any file. Although that\nchain can go wrong, in general it\u2019s far more reliable now and seldom needs any\nuser intervention or maintenance.\n\n#### The chain\n\nWhen you double-click a file, or use an Open command on it, the file is\nidentified, and checked for any com.apple.LaunchServices.OpenWith extended\nattribute that sets a custom app association. If that\u2019s present, it tells\nLaunchServices which app to use to open that specific file. You can set custom\nassociations in the Finder\u2019s Get Info dialog, in the Open With section.\n\nThe com.apple.LaunchServices.OpenWith extended attribute contains a property\nlist specifying:\n\n  * bundleidentifier, e.g. co.eclecticlight.DelightEd\n  * path, e.g. /Applications/DelightEd.app\n  * version, e.g. 0 to allow any version.\n\nIf you use the Get Info dialog to set that back to the default app, that\nextended attribute may be retained, but then will contain details of the\ndefault app instead. You can also manually reset it by deleting the extended\nattribute, to revert its behaviour to the default.\n\nMost commonly, there\u2019s no such extended attribute, so the default app will be\nused to open the file. To determine that, LaunchServices gets the type of\nfile, its Uniform Type Indicator or UTI, stored in the file\u2019s attributes.\nThose are normally set by the filename extension, and mapped to a UTI in a\ndatabase. For instance, a JPEG image file normally has an extension of JPG or\nJPEG, case insensitive, which are mapped to the UTI public.jpeg. If a file is\nbeing mapped to the wrong type, you can change its extension to one that\u2019s\ncorrect for its real UTI, which you can discover using a UTI utility such as\nmy own UTIutility or an equivalent.\n\nKnowing a file\u2019s UTI, LaunchServices then looks up in its database to discover\nthe default editor for that file type. That database is built from information\ngiven in the Info.plist property list provided in all app bundles, and the\ndefault among those can be set using the Finder\u2019s Get Info dialog, by first\nsetting Open with to your chosen default, then clicking the Change All...\nbutton below it.\n\nNow LaunchServices knows the file to open, and the app to open it with, so it\nsends that app an AppleEvent telling it to open the file. That either opens\ncorrectly, or the app may complain that it\u2019s the wrong type or format.\n\nThese links in the chain are shown in the diagram below, where your points of\ncontrol are shown in blue.\n\n#### LaunchServices problems\n\nWhen LaunchServices keeps opening the wrong version or copy of the right app,\nrather than the one that\u2019s installed in your Dock and your Applications\nfolder, it\u2019s a bit more complicated to fix. It usually helps to discover which\ncopy of the app LaunchServices is opening. Double-click on one of its\ndocuments, and Control-click on the app\u2019s icon in the Dock. Towards the bottom\nof the menu, you\u2019ll see the item Options, in which you can Show in Finder.\n\nThis opens a Finder window on the copy of the app currently used by\nLaunchServices to open documents with this UTI. That may come as a surprise,\nas the copy it\u2019s opening may be one you didn\u2019t know about. Rather than\nremoving those unwanted copies of an app until finally LaunchServices opens\nthe right one, there\u2019s a better way to fix that.\n\nBefore going any further, check that the version installed in your main\nApplications folder (or wherever it should be) is the one you want\nLaunchServices to open, and, if it\u2019s installed there, the app in the Dock is\none and the same. Then return to the Finder\u2019s Get Info dialog, and open the\nlist of apps which could open that document in the Open with: item.\n\nIf there are multiple versions of the same app, go to the foot of that menu,\nand select Other... to bring up an Open File dialog, where you select the copy\nof the app which you want to open those documents with.\n\nClick on Open and verify that this is the right copy, via the Dock.\n\nNow that\u2019s set, click on the Change All... button in the Get Info dialog\u2019s\nOpen with: section. You should find LaunchServices opening double-clicked\ndocuments using the right app, the right version, and the right copy at last.\n\n#### Advanced commands\n\nThere are two command tools that can be helpful for tackling tougher problems:\nlsappinfo for getting information from LaunchServices\u2019 database, and\nlsregister for changing it.\n\nlsappinfo is documented in its man page, which is extensive and fairly\naccurate, and by usage info in response to the command lsappinfo -h\n\nThe starting point for exploring this command is lsappinfo list which is\nprobably best piped into a text file for easy browsing. This lists all running\napps and processes known to LaunchServices, and gives a brief summary of what\nit knows about them. If you want full details on everything running, then pipe\nlsappinfo -all list to a text file, as that tells you pretty well everything\nLaunchServices knows about apps and processes.\n\nWhen you\u2019ve got over having so much information in front of you, this tool is\nmost useful for giving information about just one running app or process. To\ndo that, use lsappinfo -all info \"TextEdit\" to show all the information about\nTextEdit. If you prefer, you can specify the app using its bundle ID:\nlsappinfo info \"com.adobe.AdobeResourceSynchronizer\"\n\nlsregister is buried away in the path\n/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister\nAssuming that you\u2019ve aliased it to somewhere readily accessible, the only way\nto discover its functions is from its usage info lsregister -h\n\nUseful lsregister commands follow one of two forms: lsregister [options]\n[path] which register and unregister the item (app, usually) specified by the\npath, and lsregister [options] [-apps domainlist] [-libs domainlist] [-all\ndomainlist] which act on the LaunchServices database for the given types\n(apps, libs, all) and domains. Domains are usually specified as a list of\nletters: u,s,l,n is the complete set, covering user (your Home folder),\nsystem, local and network.\n\nIn recent versions of macOS, a new option -gc has been added to get\nLaunchServices to rescan different domains for app info and garbage collect\nits database. For example, lsregister -gc -R -v -apps u checks relevant\nfolders in your Home folder, including ~/Applications, for apps which it needs\nto add to its database. You can widen this to a full scan of apps using\nlsregister -gc -R -v -apps u,s,l\n\nReset the LaunchServices database using a utility such as OnyX, or lsregister\n-kill -r -v -apps u to affect just the user domain. For more extensive\nrebuilds, widen its domains, for example with lsregister -kill -r -v -apps\nu,s,l or lsregister -kill -r -v -all u,s,l using -seed to scan default\nlocations to seed the new database if you wish.\n\n### Share this:\n\n  * Twitter\n  * Facebook\n  * Reddit\n  * Pinterest\n  * Email\n  * Print\n\nLike Loading...\n\n### Related\n\nSolutions to Saturday Mac riddles 97May 3, 2021In \"General\"\n\nNew Mac malware: Mac File Opener, or OSX.FakeFileOpenerAugust 23, 2016In\n\"General\"\n\nQ&A: Files opened in the wrong appDecember 25, 2015In \"Macs\"\n\nPosted in Macs, Technology and tagged Finder, LaunchServices, lsappinfo,\nlsregister, UTI, UTIutility. Bookmark the permalink.\n\n## 6Comments\n\nAdd yours\n\n  1. 1\n\nJoss on April 10, 2024 at 2:44 pm\n\nReply\n\nTangent: one (some?) file type(s) is (are) forced by macOS to open in specific\napps, e.g. .pkg in the Installer app, and there\u2019s no way to set a different\nalternate app as standard. So if you want to also open these in other apps,\nyou need a workaround. For security reasons, I auto-open .pkg files in\nSuspicious Package to inspect installer packages more thoroughly, and I use\nthe (pretty awesome!) app EventScripts by Mousedown Software for the launch\nintercept, which is available on the Mac App Store. In the preferences it\noffers the trigger \u201cApp Has Launched\u201d, and whenever Installer has launched, I\nuse a couple of commands in the linked DIY shell script to get the full path\nof the pkg that is being opened, and then auto-open that file in Suspicious\nPackage.\n\nLikeLiked by 1 person\n\n     * 2\n\nhoakley on April 10, 2024 at 7:03 pm\n\nReply\n\nThank you. I must admit I had never noticed those system-enforced\nassociations. I think you can still use Open with... to choose a different app\nwhen you wish? Howard.\n\nLikeLike\n\n       * 3\n\nJavier Gallardo on April 10, 2024 at 8:23 pm\n\nReply\n\nExactly same here, but with \u201cPacifist\u201d. I have to open the app and get .pkg\nfrom there, or, in \u201cOpen with\u201d... go through \u201cother app\u201d. Only default\n\u201cInstaller\u201d is offered with its icon, and text lines with \u201cAppStore\u201d (I don\u2019t\nunderstand this connection) or \u201copen with\u201d.\n\nLikeLiked by 1 person\n\n         * 4\n\nhoakley on April 10, 2024 at 9:26 pm\n\nI\u2019m wondering whether this was part of a fix for a security vulnerability, to\nprevent exploitation through a hostile package. Howard.\n\nLikeLike\n\n         * 5\n\nJoss on April 10, 2024 at 10:18 pm\n\nYes, \u201cOpen With\u201d > \u201cOther\u201d still works, but I\u2019d have to use the mouse or\ntrackpad, and I prefer to use the keyboard. It\u2019s easier & faster: just select\nthe file with the arrow keys & hit [RETURN]. And with \u201cOpen With\u201d > \u201cOther\u201d,\nI\u2019d still have to manually select SuspiciousPackages, which would take even\nmore time.\n\nLikeLiked by 1 person\n\n         * 6\n\nhoakley on April 11, 2024 at 6:43 pm\n\nThank you. Howard.\n\nLikeLike\n\n### Leave a comment Cancel reply\n\nThis site uses Akismet to reduce spam. Learn how your comment data is\nprocessed.\n\n# Quick Links\n\n  * Free Software Menu\n  * System Updates\n  * M-series Macs\n  * Mac Troubleshooting Summary\n  * Mac problem-solving\n  * Painting topics\n  * Painting\n  * Long Reads\n\n# Search\n\n# Monthly archives\n\n  * April 2024 (33)\n  * March 2024 (81)\n  * February 2024 (72)\n  * January 2024 (78)\n  * December 2023 (79)\n  * November 2023 (74)\n  * October 2023 (77)\n  * September 2023 (77)\n  * August 2023 (72)\n  * July 2023 (79)\n  * June 2023 (73)\n  * May 2023 (79)\n  * April 2023 (73)\n  * March 2023 (76)\n  * February 2023 (68)\n  * January 2023 (74)\n  * December 2022 (74)\n  * November 2022 (72)\n  * October 2022 (76)\n  * September 2022 (72)\n  * August 2022 (75)\n  * July 2022 (76)\n  * June 2022 (73)\n  * May 2022 (76)\n  * April 2022 (71)\n  * March 2022 (77)\n  * February 2022 (68)\n  * January 2022 (77)\n  * December 2021 (75)\n  * November 2021 (72)\n  * October 2021 (75)\n  * September 2021 (76)\n  * August 2021 (75)\n  * July 2021 (75)\n  * June 2021 (71)\n  * May 2021 (80)\n  * April 2021 (79)\n  * March 2021 (77)\n  * February 2021 (75)\n  * January 2021 (75)\n  * December 2020 (77)\n  * November 2020 (84)\n  * October 2020 (81)\n  * September 2020 (79)\n  * August 2020 (103)\n  * July 2020 (81)\n  * June 2020 (78)\n  * May 2020 (78)\n  * April 2020 (81)\n  * March 2020 (86)\n  * February 2020 (77)\n  * January 2020 (86)\n  * December 2019 (82)\n  * November 2019 (74)\n  * October 2019 (89)\n  * September 2019 (80)\n  * August 2019 (91)\n  * July 2019 (95)\n  * June 2019 (88)\n  * May 2019 (91)\n  * April 2019 (79)\n  * March 2019 (78)\n  * February 2019 (71)\n  * January 2019 (69)\n  * December 2018 (79)\n  * November 2018 (71)\n  * October 2018 (78)\n  * September 2018 (76)\n  * August 2018 (78)\n  * July 2018 (76)\n  * June 2018 (77)\n  * May 2018 (71)\n  * April 2018 (67)\n  * March 2018 (73)\n  * February 2018 (67)\n  * January 2018 (83)\n  * December 2017 (94)\n  * November 2017 (73)\n  * October 2017 (86)\n  * September 2017 (92)\n  * August 2017 (69)\n  * July 2017 (81)\n  * June 2017 (76)\n  * May 2017 (90)\n  * April 2017 (76)\n  * March 2017 (79)\n  * February 2017 (65)\n  * January 2017 (76)\n  * December 2016 (75)\n  * November 2016 (68)\n  * October 2016 (76)\n  * September 2016 (78)\n  * August 2016 (70)\n  * July 2016 (74)\n  * June 2016 (66)\n  * May 2016 (71)\n  * April 2016 (67)\n  * March 2016 (71)\n  * February 2016 (68)\n  * January 2016 (90)\n  * December 2015 (96)\n  * November 2015 (103)\n  * October 2015 (119)\n  * September 2015 (115)\n  * August 2015 (117)\n  * July 2015 (117)\n  * June 2015 (105)\n  * May 2015 (111)\n  * April 2015 (119)\n  * March 2015 (69)\n  * February 2015 (54)\n  * January 2015 (39)\n\n# Tags\n\nAPFS Apple Apple silicon backup Big Sur Blake bug Catalina Consolation Console\nCorinth diagnosis Disk Utility Dor\u00e9 El Capitan extended attributes Finder\nfirmware Gatekeeper G\u00e9r\u00f4me High Sierra history of painting iCloud\nImpressionism iOS landscape LockRattler log M1 Mac Mac history macOS macOS\n10.12 macOS 10.13 macOS 10.14 macOS 10.15 macOS 11 macOS 12 macOS 13 macOS 14\nmalware Mojave Monet Monterey Moreau MRT myth narrative OS X Ovid painting\nperformance Pissarro Poussin privacy realism Renoir riddle Rubens Sargent\nscripting security Sierra SilentKnight SSD Swift Time Machine Tintoretto\nTurner update upgrade Ventura xattr Xcode XProtect\n\n# Statistics\n\n  * 16,961,969 hits\n\nBlog at WordPress.com.\n\nBegin typing your search above and press return to search. Press Esc to\ncancel.\n\n  * Comment\n  * Reblog\n  * Subscribe Subscribed\n\n    * The Eclectic Light Company\n    * Already have a WordPress.com account? Log in now.\n\n  *     * The Eclectic Light Company\n    * Customize\n    * Subscribe Subscribed\n    * Sign up\n    * Log in\n    * Copy shortlink\n    * Report this content\n    * View post in Reader\n    * Manage subscriptions\n    * Collapse this bar\n\nLoading Comments...\n\n%d\n\n", "frontpage": true}
