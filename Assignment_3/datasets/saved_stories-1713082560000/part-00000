{"aid": "40028111", "title": "Show HN: PostgreSQL Index Advisor", "url": "https://github.com/supabase/index_advisor", "domain": "github.com/supabase", "votes": 9, "user": "kiwicopple", "posted_at": "2024-04-14 02:14:36", "comments": 0, "source_title": "GitHub - supabase/index_advisor: PostgreSQL Index Advisor", "source_text": "GitHub - supabase/index_advisor: PostgreSQL Index Advisor\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nsupabase / index_advisor Public\n\n  * Sponsor\n  * Notifications\n  * Fork 0\n  * Star 15\n\nPostgreSQL Index Advisor\n\nsupabase.com/docs/guides/database/extensions/index_advisor\n\n### License\n\nPostgreSQL license\n\n15 stars 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# supabase/index_advisor\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n3 Branches\n\n1 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\nkiwicoppleUpdate README.mdddb9b4e \u00b7\n\n## History\n\n38 Commits  \n  \n### .github\n\n|\n\n### .github\n\n| fix variable name  \n  \n### docs/img\n\n|\n\n### docs/img\n\n| suggestions for readme  \n  \n### test\n\n|\n\n### test\n\n| catch all errors during execution  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| initial commit  \n  \n### .pre-commit-config.yaml\n\n|\n\n### .pre-commit-config.yaml\n\n| initial commit  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| badges and LICENSE  \n  \n### Makefile\n\n|\n\n### Makefile\n\n| initial commit  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README.md  \n  \n### index_advisor--0.1.0--0.1.1.sql\n\n|\n\n### index_advisor--0.1.0--0.1.1.sql\n\n| add test for issue_1  \n  \n### index_advisor--0.1.0.sql\n\n|\n\n### index_advisor--0.1.0.sql\n\n| add support for postgrest prepared statements  \n  \n### index_advisor--0.1.1.sql\n\n|\n\n### index_advisor--0.1.1.sql\n\n| add test for issue_1  \n  \n### index_advisor--0.1.2.sql\n\n|\n\n### index_advisor--0.1.2.sql\n\n| allow comments with semicolons in queries  \n  \n### index_advisor--0.2.0.sql\n\n|\n\n### index_advisor--0.2.0.sql\n\n| catch all errors during execution  \n  \n### index_advisor.control\n\n|\n\n### index_advisor.control\n\n| return errors as array rather than raising to enable bulk usage  \n  \n## Repository files navigation\n\n# PostgreSQL Index Advisor\n\nA PostgreSQL extension for recommending indexes to improve query performance.\n\n## Features\n\n  * Supports generic parameters e.g. $1, $2\n  * Supports materialized views\n  * Identifies tables/columns obfuscaed by views\n\n## API\n\n#### Description\n\nFor a given query, searches for a set of SQL DDL create index statements that\nimprove the query's execution time;\n\n#### Signature\n\n    \n    \n    index_advisor(query text) returns table ( startup_cost_before jsonb, startup_cost_after jsonb, total_cost_before jsonb, total_cost_after jsonb, index_statements text[], errors text[] )\n\n## Usage\n\nFor a minimal example, the index_advisor function can be given a single table\nquery with a filter on an unindexed column.\n\n    \n    \n    create extension if not exists index_advisor cascade; create table book( id int primary key, title text not null ); select * from index_advisor('select book.id from book where title = $1');\n    \n    \n    startup_cost_before | startup_cost_after | total_cost_before | total_cost_after | index_statements | errors ---------------------+--------------------+-------------------+------------------+-----------------------------------------------------+-------- 0.00 | 1.17 | 25.88 | 6.40 | {\"CREATE INDEX ON public.book USING btree (title)\"},| {} (1 row)\n\nMore complex queries may generate additional suggested indexes\n\n    \n    \n    create extension if not exists index_advisor cascade; create table author( id serial primary key, name text not null ); create table publisher( id serial primary key, name text not null, corporate_address text ); create table book( id serial primary key, author_id int not null references author(id), publisher_id int not null references publisher(id), title text ); create table review( id serial primary key, book_id int references book(id), body text not null ); select * from index_advisor(' select book.id, book.title, publisher.name as publisher_name, author.name as author_name, review.body review_body from book join publisher on book.publisher_id = publisher.id join author on book.author_id = author.id join review on book.id = review.book_id where author.id = $1 and publisher.id = $2 ');\n    \n    \n    startup_cost_before | startup_cost_after | total_cost_before | total_cost_after | index_statements | errors ---------------------+--------------------+-------------------+------------------+-----------------------------------------------------------+-------- 27.26 | 12.77 | 68.48 | 42.37 | {\"CREATE INDEX ON public.book USING btree (author_id)\", | {} \"CREATE INDEX ON public.book USING btree (publisher_id)\", \"CREATE INDEX ON public.review USING btree (book_id)\"} (3 rows)\n\n## Install\n\nRequires Postgres with hypopg installed.\n\n    \n    \n    git clone https://github.com/supabase/index_advisor.git cd index_advisor sudo make install\n\n## Run Tests\n\n    \n    \n    make install; make installcheck\n\n## About\n\nPostgreSQL Index Advisor\n\nsupabase.com/docs/guides/database/extensions/index_advisor\n\n### Topics\n\npostgres extension postgresql indexing\n\n### Resources\n\nReadme\n\n### License\n\nPostgreSQL license\n\n### Code of conduct\n\nCode of conduct\n\nActivity\n\nCustom properties\n\n### Stars\n\n15 stars\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases 1\n\nv0.2.0 Latest\n\nApr 3, 2024\n\n## Sponsor this project\n\nsupabase Supabase\n\nSponsor\n\nLearn more about GitHub Sponsors\n\n## Packages 0\n\nNo packages published\n\n## Contributors 2\n\n  * olirice Oliver Rice\n  * kiwicopple Copple\n\n## Languages\n\n  * PLpgSQL 99.2%\n  * Makefile 0.8%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": true}
