{"aid": "40034045", "title": "My Cat Alerted Me to a DDoS Attack", "url": "https://www.dannyguo.com/blog/my-cat-alerted-me-to-a-ddos-attack", "domain": "dannyguo.com", "votes": 20, "user": "dguo", "posted_at": "2024-04-14 20:12:27", "comments": 2, "source_title": "My Cat Alerted Me to a DDoS Attack", "source_text": "My Cat Alerted Me to a DDoS Attack\n\nDanny Guo | \u90ed\u4e9a\u4e1c\n\nhome \u00b7 about \u00b7 blog \u00b7 projects\n\n# My Cat Alerted Me to a DDoS Attack\n\nApril 14, 2024 \u00b7 509 words \u00b7 ~3 minutes to read\n\nA few years ago, my cat gave me my most memorable middle of the night software\nengineering incident. I was working at a startup, and we didn\u2019t have a formal\non-call rotation yet. That was a deliberate decision, since being on-call is\npainful, and the team was good about just collectively keeping an eye out for\nurgent alerts. We eventually set up an on-call rotation, but before that\nhappened, I had a fun night.\n\nAround 3 a.m., I woke up because my cat was grooming my hair. The grooming\nitself wasn\u2019t unusual. She did it occasionally, and I optimistically took it\nas a sign that she actually liked me and didn\u2019t just tolerate me. Here\u2019s the\ncat tax:\n\nBut in 9 years, that was the only time she did it while I was sleeping. I\nchecked my phone to see what time it was, and I noticed that an AWS CloudWatch\nalert had gone off a couple minutes ago because of unhealthy targets for our\nload balancer.\n\nI tried to go to our website, but it didn\u2019t load. I groaned and went to log\nonto my work laptop. Our monitoring dashboard showed a massive number of\nrequests coming from many IP addresses that were associated with different\ncountries. And international traffic wasn\u2019t typical for us anyway since our\nproducts were only available to people in the United States. It was a\ndistributed denial-of-service (DDoS) attack.\n\nMy first and not great thought was to block IP addresses at the server level,\nwhich would have been tedious and possibly ineffective if the attacker had\nsignificantly more source IP addresses to use. But then I remembered that we\nhad already set up AWS Web Application Firewall. To deal with the immediate\noutage, I set up a rule to block requests from other countries. It took effect\nand blocked hundreds of thousands of requests over the next hour or so. Our\nwebsite started working again, and the flood of requests stopped.\n\nLater that morning, we noticed that we had received an email to our customer\nsupport inbox around when the attack started. With horrible grammar, the\nsender claimed to have found a vulnerability with our website that crashed\nApache, which we didn\u2019t even use. They said they stopped all traffic to our\nwebsite and could keep it that way for months. They generously offered to give\nus a \u201csolution file\u201d if we sent them $5,000 in Bitcoin. We didn\u2019t reply,\nthough in retrospect, it could have been fun to try to troll them.\n\nI still find it hard to believe the perfect timing of my cat waking me up. You\nmight guess that the AWS alert caused my phone to vibrate or make a sound,\nwaking my cat up first. But I keep my phone in do not disturb mode during the\nnight. So I just like to think that somehow, she sensed something was wrong\nthat couldn\u2019t wait until the morning. It was certainly a more pleasant way to\nbe woken up than by a blaring PagerDuty alarm.\n\n\u2190 My Peloton Desk Setup\n\nFollow me on Twitter or Mastodon or subscribe to my newsletter or RSS feed for\nfuture posts.\n\nFound an error or typo? Feel free to open a pull request on GitHub.\n\nTwitter Mastodon GitHub Email\n\nYou can encrypt messsages with my GPG key if you'd like.\n\n\u00a9 2024 Danny Guo\n\nThis content is licensed under CC BY-NC-SA 4.0 and hosted on GitHub .\n\nAs an Amazon Associate I earn from qualifying purchases.\n\n", "frontpage": true}
